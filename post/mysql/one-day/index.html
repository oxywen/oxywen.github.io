<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="MySQL快速入门"><meta name="keywords" content="MySQL"><meta name="author" content="Oxywen"><meta name="copyright" content="Oxywen"><title>MySQL快速入门 | 不闻星河须臾</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="/pio/static/pio.css"><script src="/pio/static/l2d.js"></script><script src="/pio/static/pio.js"></script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-6762629114964129',
  enable_page_level_ads: 'true'
});
</script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ca2650c4c7f8c24a413550104d43d6f3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#零、前言"><span class="toc-number">1.</span> <span class="toc-text">零、前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一、引言"><span class="toc-number">2.</span> <span class="toc-text">一、引言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-现有的数据存储方式有哪些？"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 现有的数据存储方式有哪些？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-以上存储方式存在哪些缺点？"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 以上存储方式存在哪些缺点？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、数据库"><span class="toc-number">3.</span> <span class="toc-text">二、数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-概念"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-数据库的分类"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 数据库的分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、数据库管理系统"><span class="toc-number">4.</span> <span class="toc-text">三、数据库管理系统</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-概念"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-常见数据库管理系统"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 常见数据库管理系统</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、MySQL"><span class="toc-number">5.</span> <span class="toc-text">四、MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-简介"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-访问与下载"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 访问与下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-安装"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-卸载"><span class="toc-number">5.4.</span> <span class="toc-text">4.4 卸载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-配置环境变量"><span class="toc-number">5.5.</span> <span class="toc-text">4.5 配置环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-MySQL目录结构"><span class="toc-number">5.6.</span> <span class="toc-text">4.6 MySQL目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-MySQL配置文件"><span class="toc-number">5.7.</span> <span class="toc-text">4.7 MySQL配置文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、SQL语言"><span class="toc-number">6.</span> <span class="toc-text">五、SQL语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-概念"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-MySQL应用"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 MySQL应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-基本命令"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 基本命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、客户端工具"><span class="toc-number">7.</span> <span class="toc-text">六、客户端工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-Navicate"><span class="toc-number">7.1.</span> <span class="toc-text">6.1 Navicate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-SQLyog"><span class="toc-number">7.2.</span> <span class="toc-text">6.2 SQLyog</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七、数据查询【重点】"><span class="toc-number">8.</span> <span class="toc-text">七、数据查询【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-数据库表的基本结构"><span class="toc-number">8.1.</span> <span class="toc-text">7.1 数据库表的基本结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-基本查询"><span class="toc-number">8.2.</span> <span class="toc-text">7.2 基本查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-1-查询部分列"><span class="toc-number">8.2.1.</span> <span class="toc-text">7.2.1 查询部分列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-2-查询所有列"><span class="toc-number">8.2.2.</span> <span class="toc-text">7.2.2 查询所有列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-3-对列中的数据进行运算"><span class="toc-number">8.2.3.</span> <span class="toc-text">7.2.3 对列中的数据进行运算</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-4-列的别名"><span class="toc-number">8.2.4.</span> <span class="toc-text">7.2.4 列的别名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-5-查询结果去重"><span class="toc-number">8.2.5.</span> <span class="toc-text">7.2.5 查询结果去重</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-排序查询"><span class="toc-number">8.3.</span> <span class="toc-text">7.3 排序查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3-1-依据单列排序"><span class="toc-number">8.3.1.</span> <span class="toc-text">7.3.1 依据单列排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3-2-依据多列排序"><span class="toc-number">8.3.2.</span> <span class="toc-text">7.3.2 依据多列排序</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-条件查询"><span class="toc-number">8.4.</span> <span class="toc-text">7.4 条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-1-等值判断（-）"><span class="toc-number">8.4.1.</span> <span class="toc-text">7.4.1 等值判断（&#x3D;）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-2-逻辑判断（and-or-not）"><span class="toc-number">8.4.2.</span> <span class="toc-text">7.4.2 逻辑判断（and,or,not）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-3-不等值判断（-gt-lt-gt-lt-lt-gt-）"><span class="toc-number">8.4.3.</span> <span class="toc-text">7.4.3 不等值判断（&gt;,&lt;,&gt;&#x3D;,&lt;&#x3D;,!&#x3D;,&lt;&gt;）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-4-区间判断（between-and）"><span class="toc-number">8.4.4.</span> <span class="toc-text">7.4.4 区间判断（between and）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-5-NULL值判断（IS-NULL-IS-NOT-NULL）"><span class="toc-number">8.4.5.</span> <span class="toc-text">7.4.5 NULL值判断（IS NULL,IS NOT NULL）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-6-枚举查询（IN（值1-值2-值3））"><span class="toc-number">8.4.6.</span> <span class="toc-text">7.4.6 枚举查询（IN（值1,值2,值3））</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-7-模糊查询"><span class="toc-number">8.4.7.</span> <span class="toc-text">7.4.7 模糊查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-8-分支结构查询"><span class="toc-number">8.4.8.</span> <span class="toc-text">7.4.8 分支结构查询</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-时间查询"><span class="toc-number">8.5.</span> <span class="toc-text">7.5 时间查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-5-1-获得当前系统时间"><span class="toc-number">8.5.1.</span> <span class="toc-text">7.5.1 获得当前系统时间</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-字符串查询"><span class="toc-number">8.6.</span> <span class="toc-text">7.6 字符串查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-6-1字符串应用"><span class="toc-number">8.6.1.</span> <span class="toc-text">7.6.1字符串应用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-聚合函数"><span class="toc-number">8.7.</span> <span class="toc-text">7.7 聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7-1单列总和"><span class="toc-number">8.7.1.</span> <span class="toc-text">7.7.1单列总和</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7-2-单列平均值"><span class="toc-number">8.7.2.</span> <span class="toc-text">7.7.2 单列平均值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7-3-单列最大值"><span class="toc-number">8.7.3.</span> <span class="toc-text">7.7.3 单列最大值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7-4-单列最小值"><span class="toc-number">8.7.4.</span> <span class="toc-text">7.7.4 单列最小值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7-5总行数"><span class="toc-number">8.7.5.</span> <span class="toc-text">7.7.5总行数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-8-分组查询"><span class="toc-number">8.8.</span> <span class="toc-text">7.8 分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-8-1-查询各部门总人数"><span class="toc-number">8.8.1.</span> <span class="toc-text">7.8.1 查询各部门总人数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-8-2-查询各部门的平均工资"><span class="toc-number">8.8.2.</span> <span class="toc-text">7.8.2 查询各部门的平均工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-8-3-查询各部门、各岗位的人数"><span class="toc-number">8.8.3.</span> <span class="toc-text">7.8.3 查询各部门、各岗位的人数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-8-4-常见问题"><span class="toc-number">8.8.4.</span> <span class="toc-text">7.8.4 常见问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-9-分组过滤查询"><span class="toc-number">8.9.</span> <span class="toc-text">7.9 分组过滤查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-9-1-统计部门的最高工资"><span class="toc-number">8.9.1.</span> <span class="toc-text">7.9.1 统计部门的最高工资</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-10-限定查询"><span class="toc-number">8.10.</span> <span class="toc-text">7.10 限定查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-10-1-查询前5行记录"><span class="toc-number">8.10.1.</span> <span class="toc-text">7.10.1 查询前5行记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-10-2-查询范围记录"><span class="toc-number">8.10.2.</span> <span class="toc-text">7.10.2 查询范围记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-10-3-LIMIT的典型应用"><span class="toc-number">8.10.3.</span> <span class="toc-text">7.10.3 LIMIT的典型应用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-11-查询总结"><span class="toc-number">8.11.</span> <span class="toc-text">7.11 查询总结</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-11-1-SQL编写顺序"><span class="toc-number">8.11.1.</span> <span class="toc-text">7.11.1 SQL编写顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-11-2-SQL语句编写顺序"><span class="toc-number">8.11.2.</span> <span class="toc-text">7.11.2 SQL语句编写顺序</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-12-子查询（作为条件判断）"><span class="toc-number">8.12.</span> <span class="toc-text">7.12 子查询（作为条件判断）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-12-1-查询工资大于Bruce的员工信息"><span class="toc-number">8.12.1.</span> <span class="toc-text">7.12.1 查询工资大于Bruce的员工信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-13-子查询（作为枚举查询条件）"><span class="toc-number">8.13.</span> <span class="toc-text">7.13 子查询（作为枚举查询条件）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-13-1-查询与名为’King’同一部门的员工信息"><span class="toc-number">8.13.1.</span> <span class="toc-text">7.13.1 查询与名为’King’同一部门的员工信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-13-2-工资高于60部-所有人的信息"><span class="toc-number">8.13.2.</span> <span class="toc-text">7.13.2 工资高于60部]所有人的信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-14-子查询（作为一张表）"><span class="toc-number">8.14.</span> <span class="toc-text">7.14 子查询（作为一张表）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-14-1-查询员工表中工资排名前5名的员工信息"><span class="toc-number">8.14.1.</span> <span class="toc-text">7.14.1 查询员工表中工资排名前5名的员工信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-15-合并查询（了解）"><span class="toc-number">8.15.</span> <span class="toc-text">7.15 合并查询（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-15-1-合并两张表的结果-去除重复记录"><span class="toc-number">8.15.1.</span> <span class="toc-text">7.15.1 合并两张表的结果(去除重复记录)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-15-2-合并两张表的结果-保留重复记录"><span class="toc-number">8.15.2.</span> <span class="toc-text">7.15.2 合并两张表的结果(保留重复记录)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-16-表连接查询"><span class="toc-number">8.16.</span> <span class="toc-text">7.16 表连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-16-1-内连接查询-INNER-JOIN-ON"><span class="toc-number">8.16.1.</span> <span class="toc-text">7.16.1 内连接查询(INNER JOIN ON)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-16-2-三表连接查询"><span class="toc-number">8.16.2.</span> <span class="toc-text">7.16.2 三表连接查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-16-3-左外连接-LEFT-JOIN-ON"><span class="toc-number">8.16.3.</span> <span class="toc-text">7.16.3 左外连接(LEFT JOIN ON)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-16-4-右外连接-RIGHT-JOIN-ON"><span class="toc-number">8.16.4.</span> <span class="toc-text">7.16.4 右外连接(RIGHT JOIN ON)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#八、DML操作【重点】"><span class="toc-number">9.</span> <span class="toc-text">八、DML操作【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-新增（INSTER）"><span class="toc-number">9.1.</span> <span class="toc-text">8.1 新增（INSTER）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-1-添加一条信息"><span class="toc-number">9.1.1.</span> <span class="toc-text">8.1.1 添加一条信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-修改（UPDATE）"><span class="toc-number">9.2.</span> <span class="toc-text">8.2 修改（UPDATE）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-1-修改一条信息"><span class="toc-number">9.2.1.</span> <span class="toc-text">8.2.1 修改一条信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-删除（DELETE）"><span class="toc-number">9.3.</span> <span class="toc-text">8.3 删除（DELETE）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-1-删除一条信息"><span class="toc-number">9.3.1.</span> <span class="toc-text">8.3.1 删除一条信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-清空整表数据（TRUNCATE）"><span class="toc-number">9.4.</span> <span class="toc-text">8.4 清空整表数据（TRUNCATE）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-4-1-清空整张表"><span class="toc-number">9.4.1.</span> <span class="toc-text">8.4.1 清空整张表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#九、数据表操作"><span class="toc-number">10.</span> <span class="toc-text">九、数据表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-数据类型"><span class="toc-number">10.1.</span> <span class="toc-text">9.1 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-1-1-数值类型"><span class="toc-number">10.1.1.</span> <span class="toc-text">9.1.1 数值类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-1-2-日期类型"><span class="toc-number">10.1.2.</span> <span class="toc-text">9.1.2 日期类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-1-3-字符串类型"><span class="toc-number">10.1.3.</span> <span class="toc-text">9.1.3 字符串类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-数据表的创建（CREATE）"><span class="toc-number">10.2.</span> <span class="toc-text">9.2 数据表的创建（CREATE）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-1-创建表"><span class="toc-number">10.2.1.</span> <span class="toc-text">9.2.1 创建表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-数据表的修改（ALTER）"><span class="toc-number">10.3.</span> <span class="toc-text">9.3 数据表的修改（ALTER）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-1-向现有表中添加列"><span class="toc-number">10.3.1.</span> <span class="toc-text">9.3.1 向现有表中添加列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-2-修改表中的列"><span class="toc-number">10.3.2.</span> <span class="toc-text">9.3.2 修改表中的列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-3-删除表中的列"><span class="toc-number">10.3.3.</span> <span class="toc-text">9.3.3 删除表中的列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-4-修改列名"><span class="toc-number">10.3.4.</span> <span class="toc-text">9.3.4 修改列名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-5-修改表名"><span class="toc-number">10.3.5.</span> <span class="toc-text">9.3.5 修改表名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-数据表的删除-DROP"><span class="toc-number">10.4.</span> <span class="toc-text">9.4 数据表的删除(DROP)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-4-1-删除学生表"><span class="toc-number">10.4.1.</span> <span class="toc-text">9.4.1 删除学生表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十、约束"><span class="toc-number">11.</span> <span class="toc-text">十、约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-实体完整性约束"><span class="toc-number">11.1.</span> <span class="toc-text">10.1 实体完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-1-1-主键约束"><span class="toc-number">11.1.1.</span> <span class="toc-text">10.1.1 主键约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-1-2-唯一约束"><span class="toc-number">11.1.2.</span> <span class="toc-text">10.1.2 唯一约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-1-3-自动增长列"><span class="toc-number">11.1.3.</span> <span class="toc-text">10.1.3 自动增长列</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-域完整性约束"><span class="toc-number">11.2.</span> <span class="toc-text">10.2 域完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-2-1-非空约束"><span class="toc-number">11.2.1.</span> <span class="toc-text">10.2.1 非空约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-2-2默认值约束"><span class="toc-number">11.2.2.</span> <span class="toc-text">10.2. 2默认值约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-2-3引用完整性约束"><span class="toc-number">11.2.3.</span> <span class="toc-text">10.2.3引用完整性约束</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-约束创建整合"><span class="toc-number">11.3.</span> <span class="toc-text">10.3 约束创建整合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-1-创建表"><span class="toc-number">11.3.1.</span> <span class="toc-text">10.3.1 创建表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十一、事务【重点】"><span class="toc-number">12.</span> <span class="toc-text">十一、事务【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-模拟转账"><span class="toc-number">12.1.</span> <span class="toc-text">11.1 模拟转账</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-1-数据库模拟转账"><span class="toc-number">12.1.1.</span> <span class="toc-text">11.1.1 数据库模拟转账</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-2-模拟转账错误"><span class="toc-number">12.1.2.</span> <span class="toc-text">11.1.2 模拟转账错误</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-事务的概念"><span class="toc-number">12.2.</span> <span class="toc-text">11.2 事务的概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-3-事务的边界"><span class="toc-number">12.3.</span> <span class="toc-text">11.3 事务的边界</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-4-事务的原理"><span class="toc-number">12.4.</span> <span class="toc-text">11.4 事务的原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-5-事务的特性"><span class="toc-number">12.5.</span> <span class="toc-text">11.5 事务的特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-6-事务应用"><span class="toc-number">12.6.</span> <span class="toc-text">11.6 事务应用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11-6-1事务完成转账"><span class="toc-number">12.6.1.</span> <span class="toc-text">11.6.1事务完成转账</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十二、权限管理"><span class="toc-number">13.</span> <span class="toc-text">十二、权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-创建用户"><span class="toc-number">13.1.</span> <span class="toc-text">12.1 创建用户</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#12-1-1-创建一个用户"><span class="toc-number">13.1.1.</span> <span class="toc-text">12.1.1 创建一个用户</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-授权"><span class="toc-number">13.2.</span> <span class="toc-text">12.2 授权</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#12-2-1-用户授权"><span class="toc-number">13.2.1.</span> <span class="toc-text">12.2.1 用户授权</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-3-撤销权限"><span class="toc-number">13.3.</span> <span class="toc-text">12.3 撤销权限</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#12-3-1-撤销用户权限"><span class="toc-number">13.3.1.</span> <span class="toc-text">12.3.1 撤销用户权限</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-4-删除用户"><span class="toc-number">13.4.</span> <span class="toc-text">12.4 删除用户</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#12-4-1-删除用户"><span class="toc-number">13.4.1.</span> <span class="toc-text">12.4.1 删除用户</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十三、视图"><span class="toc-number">14.</span> <span class="toc-text">十三、视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-1-概念"><span class="toc-number">14.1.</span> <span class="toc-text">13.1 概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-2-视图特点"><span class="toc-number">14.2.</span> <span class="toc-text">13.2 视图特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-视图的创建"><span class="toc-number">14.3.</span> <span class="toc-text">13.3 视图的创建</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#13-3-1-创建视图"><span class="toc-number">14.3.1.</span> <span class="toc-text">13.3.1 创建视图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-3-2-使用视图"><span class="toc-number">14.3.2.</span> <span class="toc-text">13.3.2 使用视图</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-4-视图的修改"><span class="toc-number">14.4.</span> <span class="toc-text">13.4 视图的修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-5-视图的删除"><span class="toc-number">14.5.</span> <span class="toc-text">13.5 视图的删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-6-视图的注意事项"><span class="toc-number">14.6.</span> <span class="toc-text">13.6 视图的注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十四、SQL语言分类"><span class="toc-number">15.</span> <span class="toc-text">十四、SQL语言分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#14-1-SQL语言分类"><span class="toc-number">15.1.</span> <span class="toc-text">14.1 SQL语言分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十五、综合练习"><span class="toc-number">16.</span> <span class="toc-text">十五、综合练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1数据库表"><span class="toc-number">16.1.</span> <span class="toc-text">15.1数据库表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-综合练习1-多表查询"><span class="toc-number">16.2.</span> <span class="toc-text">15.2 综合练习1-多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#15-2-1-查询所有用户的订单"><span class="toc-number">16.2.1.</span> <span class="toc-text">15.2.1 查询所有用户的订单</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15-2-2-查询用户id为1的所有订单详情"><span class="toc-number">16.2.2.</span> <span class="toc-text">15.2.2 查询用户id为1的所有订单详情</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-3-综合练习2-子查询"><span class="toc-number">16.3.</span> <span class="toc-text">15.3 综合练习2-子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#15-3-1-查看用户为张三的订单"><span class="toc-number">16.3.1.</span> <span class="toc-text">15.3.1 查看用户为张三的订单</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15-3-2-查询出订单的价格大于800的所有用户信息"><span class="toc-number">16.3.2.</span> <span class="toc-text">15.3.2 查询出订单的价格大于800的所有用户信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-4-综合练习3-分页查询"><span class="toc-number">16.4.</span> <span class="toc-text">15.4 综合练习3-分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#15-4-1-查询所有的订单信息，每页显示5条数据"><span class="toc-number">16.4.1.</span> <span class="toc-text">15.4.1 查询所有的订单信息，每页显示5条数据</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s1.ax1x.com/2020/08/18/duKjzQ.jpg"></div><div class="author-info__name text-center">Oxywen</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/oxywen" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">10</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">10</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">6</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://waxxh.me/" target="_blank" rel="noopener">Waxxh's Blog</a><a class="author-info-links__name text-center" href="http://www.sweetsmoe.com/" target="_blank" rel="noopener">甜小萌</a><a class="author-info-links__name text-center" href="https://www.nmoe.cn/" target="_blank" rel="noopener">花落知雨</a><a class="author-info-links__name text-center" href="https://www.yuanshuli.com/" target="_blank" rel="noopener">碧海长天</a><a class="author-info-links__name text-center" href="https://www.xujianhua.com/" target="_blank" rel="noopener">许建华博客</a><a class="author-info-links__name text-center" href="https://yanqiyu.info/" target="_blank" rel="noopener">Karuboniru's Blog</a><a class="author-info-links__name text-center" href="https://littleblc.gitee.io/" target="_blank" rel="noopener">金毛小黑米</a></div></div></div><!-- 判断是否启用aplayer--><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><meting-js id="4944495601" server="netease" type="playlist" fixed="true" order="random" preload="auto" autoplay="false" loop="all" mutex="true" volume="0.7" list-olded="true" theme="#49b1f5"></meting-js><div class="pio-container" style="right:0;"><div class="pio-action"></div><canvas id="pio" width="300" height="256"></canvas></div><script type="text/javascript">var pio = new Paul_Pio({
  "mode": "static",
  "hidden": false,
  "content": {
  "welcome": ["你好，欢迎来到Oxywen的小窝，希望玩得开心","你好呀，我是Pio，傲完就娇的Pio~"],
  "referer": "欢迎你，来自%t的用户",
  },
  "model": ["/pio/models/pio/model.json"]
  })</script><div id="content-outer"><div id="top-container" style="background-image: url(https://s1.ax1x.com/2020/08/18/duKzss.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">不闻星河须臾</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">MySQL快速入门</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-10</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/mysql/">mysql</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">10.6k</span><span class="post-meta__separator">|</span><span>阅读时长: 41 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="零、前言"><a href="#零、前言" class="headerlink" title="零、前言"></a>零、前言</h3><blockquote>
</blockquote>
<h3 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h3><h4 id="1-1-现有的数据存储方式有哪些？"><a href="#1-1-现有的数据存储方式有哪些？" class="headerlink" title="1.1 现有的数据存储方式有哪些？"></a>1.1 现有的数据存储方式有哪些？</h4><blockquote>
<ul>
<li>Java程序存储数据（变量、 对象、数组、集合），数据保存在内存中，属于瞬时状态存储。</li>
<li>文件（File）存储数据，保存在硬盘上，属于持久状态存储。</li>
</ul>
</blockquote>
<h4 id="1-2-以上存储方式存在哪些缺点？"><a href="#1-2-以上存储方式存在哪些缺点？" class="headerlink" title="1.2 以上存储方式存在哪些缺点？"></a>1.2 以上存储方式存在哪些缺点？</h4><blockquote>
<ul>
<li>没有数据类型的区分。</li>
<li>存储数据量级较小。</li>
<li>没有访问安全限制。</li>
<li>没有备份、恢复机制。</li>
</ul>
</blockquote>
<h3 id="二、数据库"><a href="#二、数据库" class="headerlink" title="二、数据库"></a>二、数据库</h3><h4 id="2-1-概念"><a href="#2-1-概念" class="headerlink" title="2.1 概念"></a>2.1 概念</h4><blockquote>
<p>数据库是“按照数据结构来组织、<span style="color:#4fc08d;"><strong>存储和管理数据的仓库</strong></span>。是一个长期存储在计算机内的、有组织的、有共享的、统一管理的数据集合。”</p>
</blockquote>
<h4 id="2-2-数据库的分类"><a href="#2-2-数据库的分类" class="headerlink" title="2.2 数据库的分类"></a>2.2 数据库的分类</h4><blockquote>
<ul>
<li>网状结构数据库:美国通用电气公司IDS (Integrated Data Store)，以节点形式存储和访问。</li>
<li>层次结构数据库: IBM公 司IMS (Information Management System)定向有序的树状结构实现存储和访问。</li>
<li>关系结构数据库: Oracle、 DB2、MySQL、 SQL Server,以表格(Table) 存储，多表间建立关联关系，通过分类、合并、连接、选取等运算实现访问。</li>
<li>非关系型数据库: ElastecSearch、 MongoDB、 Redis, 多数使用哈希表，表中以键值(key-value) 的方式实现特定的键和一个指针指向的特定数据。</li>
</ul>
</blockquote>
<h3 id="三、数据库管理系统"><a href="#三、数据库管理系统" class="headerlink" title="三、数据库管理系统"></a>三、数据库管理系统</h3><h4 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1 概念"></a>3.1 概念</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>数据库管理系统</strong></span>（DataBase Management System, DBMS） ：指一种操作和管理数据库的大型软件，用于建立、使用和维护数据库，对数据库进行统一管理和控制， 以保证数据库的安全性和完整性。用户通过数据库管理系统访问数据库中的数据。</p>
</blockquote>
<h4 id="3-2-常见数据库管理系统"><a href="#3-2-常见数据库管理系统" class="headerlink" title="3.2 常见数据库管理系统"></a>3.2 常见数据库管理系统</h4><blockquote>
<ul>
<li>Oracle: 被认为是业界目前比较成功的关系型数据库管理系统。Oracle数据库 可以运行在UNIX、Windows等 主流操作系统平台，完全支持所有的工业标准，并获得最高级别的ISO标准安全性认证。</li>
<li>DB2: IBM公司的产品，DB2数据库系统采用多进程多线索体系结构，其功能足以满足大中公司的需要，并可灵活地服务于中小型电子商务解决方案。</li>
<li>SQL Server: Microsoft 公司推出的关系型数据库管理系统。具有使用方便可伸缩性好与相关软件集成程度高等优点。</li>
<li>SQLite:应用在手机端的数据库。</li>
</ul>
</blockquote>
<h3 id="四、MySQL"><a href="#四、MySQL" class="headerlink" title="四、MySQL"></a>四、MySQL</h3><h4 id="4-1-简介"><a href="#4-1-简介" class="headerlink" title="4.1 简介"></a>4.1 简介</h4><blockquote>
<p>MySQL是一个<span style="color:#4fc08d;"><strong>关系型数据库管理系统</strong></span>，由瑞典MySQL AB公司开发，属于Oracle旗下产品。MySQL是最流行的关系型数据库管理系统之一，在WEB应用方面，MySQL 是最好的RDBMS(Relational Database Management System,关系数据库管理系统)应用软件之一。</p>
</blockquote>
<h4 id="4-2-访问与下载"><a href="#4-2-访问与下载" class="headerlink" title="4.2 访问与下载"></a>4.2 访问与下载</h4><blockquote>
<p>官方网站: <a href="https://www.mysql.com/" target="_blank" rel="noopener">https://www.mysql.com/</a><br>下载地址: <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></p>
</blockquote>
<h4 id="4-3-安装"><a href="#4-3-安装" class="headerlink" title="4.3 安装"></a>4.3 安装</h4><blockquote>
<p>运行 mysql-installer-community-5.7.28.0.msi，进入安装步骤</p>
</blockquote>
<h4 id="4-4-卸载"><a href="#4-4-卸载" class="headerlink" title="4.4 卸载"></a>4.4 卸载</h4><blockquote>
</blockquote>
<h4 id="4-5-配置环境变量"><a href="#4-5-配置环境变量" class="headerlink" title="4.5 配置环境变量"></a>4.5 配置环境变量</h4><blockquote>
</blockquote>
<h4 id="4-6-MySQL目录结构"><a href="#4-6-MySQL目录结构" class="headerlink" title="4.6 MySQL目录结构"></a>4.6 MySQL目录结构</h4><blockquote>
<p>核心文件介绍</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">文件夹名称</th>
<th align="center">内容</th>
</tr>
</thead>
<tbody><tr>
<td align="center">bin</td>
<td align="center">命令文件</td>
</tr>
<tr>
<td align="center">lib</td>
<td align="center">库文件</td>
</tr>
<tr>
<td align="center">include</td>
<td align="center">头文件</td>
</tr>
<tr>
<td align="center">share</td>
<td align="center">字符集、语言等信息</td>
</tr>
</tbody></table>
<h4 id="4-7-MySQL配置文件"><a href="#4-7-MySQL配置文件" class="headerlink" title="4.7 MySQL配置文件"></a>4.7 MySQL配置文件</h4><blockquote>
<p>在MySQL安装目录中找到my.ini文件，并打开my.ini文件查看几个 常用配置参数</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">default-character-set</td>
<td align="center">客户端默认字符集</td>
</tr>
<tr>
<td align="center">character-set-server</td>
<td align="center">服务器端默认字符集</td>
</tr>
<tr>
<td align="center">port</td>
<td align="center">客户端和服务器端的端口号</td>
</tr>
<tr>
<td align="center">default-storage-engine</td>
<td align="center">MySQL默认存储引擎 INNODB</td>
</tr>
</tbody></table>
<h3 id="五、SQL语言"><a href="#五、SQL语言" class="headerlink" title="五、SQL语言"></a>五、SQL语言</h3><h4 id="5-1-概念"><a href="#5-1-概念" class="headerlink" title="5.1 概念"></a>5.1 概念</h4><blockquote>
<p>SQL (Structured Query Language)结构化查询语言，用于存取数据、更新、查询和管理关系数据库系统的程序设计语言。</p>
</blockquote>
<ul>
<li><span style="color:#4fc08d;"><strong>经验：通常执行对数据库的“增删改查”，简称C（Create）R（Read）U（Update）D（Delete）。</strong></span></li>
</ul>
<h4 id="5-2-MySQL应用"><a href="#5-2-MySQL应用" class="headerlink" title="5.2 MySQL应用"></a>5.2 MySQL应用</h4><blockquote>
<p>对于数据库的操作，需要在进入MySQL环境下进行指令输入，并在一句指令的末尾使用;结束</p>
</blockquote>
<h4 id="5-3-基本命令"><a href="#5-3-基本命令" class="headerlink" title="5.3 基本命令"></a>5.3 基本命令</h4><blockquote>
<p>查看MySQL中所有数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW DATABASES; #显示当前MySQL中包含的所有数据库</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">数据库名称</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">information_schema</td>
<td align="center">信息数据库，其中保存着关于所有数据库的信息（元数据）。元数据是关于数据的数据，如数据库名或表名，列的数据类型，或访问权限等。</td>
</tr>
<tr>
<td align="center">mysql</td>
<td align="center">核心数据库，主要负责存储数据库的用户、权限设置、关键字等，以及需要使用的控制和管理信息，不可以删除。</td>
</tr>
<tr>
<td align="center">performance_schema</td>
<td align="center">性能优化的数据库，MySQL 5.5版本中新增的一个性能优化的引擎。</td>
</tr>
<tr>
<td align="center">sys</td>
<td align="center">系统数据库，MySQL5.7版本中新增的可以快速的了解元数据信息的系统库便于发现数据库的多样信息，解决性能瓶颈问题。</td>
</tr>
</tbody></table>
<blockquote>
<p>创建自定义数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE DATABASE mydb1; #创建mydb1数据库</span><br><span class="line">mysql&gt; CREATE DATABASE mydb2 CHARACTER SET gbk; #创建数据库并设置编码格式为gbk</span><br><span class="line">mysql&gt; CREATE DATABASE IF NOT EXISTS mydb3;	#如果mydb3数据库不存在则创建，如果存在则不创建</span><br></pre></td></tr></table></figure>



<blockquote>
<p>查看数据库创建信息</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW CREATE DATABASE mydb2; #查看创建数据库时的基本信息</span><br></pre></td></tr></table></figure>



<blockquote>
<p>删除数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; DROP DATABASE mydb1; #删除数据库mydb1</span><br></pre></td></tr></table></figure>



<blockquote>
<p>查看当前所使用的数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT DATABASE();</span><br></pre></td></tr></table></figure>



<blockquote>
<p>使用数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; USE mydb1; #使用mydb1数据库</span><br></pre></td></tr></table></figure>



<h3 id="六、客户端工具"><a href="#六、客户端工具" class="headerlink" title="六、客户端工具"></a>六、客户端工具</h3><h4 id="6-1-Navicate"><a href="#6-1-Navicate" class="headerlink" title="6.1 Navicate"></a>6.1 Navicate</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>Navicat是一套快速、 可靠并价格相宜的数据库管理工具，专为简化数据库的管理及降低系统管理成本而设计</strong></span>。它的设计符合数据库管理员、开发人员及中小企业的需要。Navicat 是以直觉化的图形用户界面而建的，让你可以以安全并且简单的方式创建、组织、访问并共用信息。</p>
</blockquote>
<h4 id="6-2-SQLyog"><a href="#6-2-SQLyog" class="headerlink" title="6.2 SQLyog"></a>6.2 SQLyog</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>MySQL可能是世界上最流行的开源数据库引擎，但是使用基于文本的工具和配置文件可能很难进行管理。</strong></span>SQLyog提供 了完整的图形界面，即使初学者也可以轻松使用MySQL的强大功能。其拥有广泛的预定义工具和查询、友好的视觉界面、类似Excel的查询结果编辑界面等优点。</p>
</blockquote>
<h3 id="七、数据查询【重点】"><a href="#七、数据查询【重点】" class="headerlink" title="七、数据查询【重点】"></a>七、数据查询【<code>重点</code>】</h3><h4 id="7-1-数据库表的基本结构"><a href="#7-1-数据库表的基本结构" class="headerlink" title="7.1 数据库表的基本结构"></a>7.1 数据库表的基本结构</h4><blockquote>
<p>关系结构数据库是以表格(Table) 进行数据存储，表格由“行”和“列”组成</p>
</blockquote>
<ul>
<li><span style="color:#4fc08d;"><strong>经验：执行查询语句返回的结果集是一张虚拟表。</strong></span></li>
</ul>
<h4 id="7-2-基本查询"><a href="#7-2-基本查询" class="headerlink" title="7.2 基本查询"></a>7.2 基本查询</h4><blockquote>
<p>语法：  <span style="color:#4fc08d;"><strong>SELECT 列名 FROM 表名</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SELECT</td>
<td align="center">指定要查询的列</td>
</tr>
<tr>
<td align="center">FROM</td>
<td align="center">指定要查询的表</td>
</tr>
</tbody></table>
<h5 id="7-2-1-查询部分列"><a href="#7-2-1-查询部分列" class="headerlink" title="7.2.1 查询部分列"></a>7.2.1 查询部分列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工表中所有员工的编号、名字、邮箱</span><br><span class="line">SELECT employee_id,first_name,email</span><br><span class="line">FROM t_employess;</span><br></pre></td></tr></table></figure>

<h5 id="7-2-2-查询所有列"><a href="#7-2-2-查询所有列" class="headerlink" title="7.2.2 查询所有列"></a>7.2.2 查询所有列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工表中所有员工的所有信息（所有列）</span><br><span class="line">SELECT 所有列的列名（英文逗号分隔列名） FROM t_employees;</span><br><span class="line">SELECT * FROM t_employees;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：在生产环境下，优先使用列名查询。* 的方式需要转换成全列名，效率低，可读性差。</strong></span></li>
</ul>
<h5 id="7-2-3-对列中的数据进行运算"><a href="#7-2-3-对列中的数据进行运算" class="headerlink" title="7.2.3 对列中的数据进行运算"></a>7.2.3 对列中的数据进行运算</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工表中所有员工的编号、名字、年薪</span><br><span class="line">SELECT employee_id,first_name,salary*12</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>算术运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>两列做加法运算</td>
</tr>
<tr>
<td>-</td>
<td>两列做减法运算</td>
</tr>
<tr>
<td>*</td>
<td>两列做乘法运算</td>
</tr>
<tr>
<td>/</td>
<td>两列做除法运算</td>
</tr>
</tbody></table>
<ul>
<li><span style="color:#4fc08d;"><strong>注意：在MySQL中，%是占位符，而非模运算符。</strong></span></li>
</ul>
<h5 id="7-2-4-列的别名"><a href="#7-2-4-列的别名" class="headerlink" title="7.2.4 列的别名"></a>7.2.4 列的别名</h5><blockquote>
<p>列名 AS ‘列别名’</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#查询员工表中所有员工的编号、名字、年薪（列名均为中文）</span><br><span class="line">SELECT employees_id as &#39;编号&#39;,first_name as &#39;名字&#39;,salary*12 as &#39;年薪&#39;</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></table></figure>



<h5 id="7-2-5-查询结果去重"><a href="#7-2-5-查询结果去重" class="headerlink" title="7.2.5 查询结果去重"></a>7.2.5 查询结果去重</h5><blockquote>
<p>DISTINCT 列名</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#查询员工表中所有经理的id</span><br><span class="line">SELECT DISTINCT manager_id</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></table></figure>



<h4 id="7-3-排序查询"><a href="#7-3-排序查询" class="headerlink" title="7.3 排序查询"></a>7.3 排序查询</h4><blockquote>
<p>语法：SELECT 列名 FROM 表名 <span style="color:#4fc08d;"><strong>ORDER BY 排序列 [排序规则]</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th>排序规则</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ASC</td>
<td>对前面排序列做升序排序</td>
</tr>
<tr>
<td>DESC</td>
<td>对前面排序列做降序排序</td>
</tr>
</tbody></table>
<h5 id="7-3-1-依据单列排序"><a href="#7-3-1-依据单列排序" class="headerlink" title="7.3.1 依据单列排序"></a>7.3.1 依据单列排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的编号，名字，薪资。按照工资高低进行降序排序</span><br><span class="line">SELECT employee_id,first_name,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">ORDER BY salary DESC ;</span><br></pre></td></tr></table></figure>

<h5 id="7-3-2-依据多列排序"><a href="#7-3-2-依据多列排序" class="headerlink" title="7.3.2 依据多列排序"></a>7.3.2 依据多列排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的编号，名字，薪资。按照工资高低进行升序排序(薪资相同时，按照编号进行升序排序)。</span><br><span class="line">SELECT employee_id,first_name,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">ORDER BY salary DESC,employee_id ASC;</span><br></pre></td></tr></table></figure>



<h4 id="7-4-条件查询"><a href="#7-4-条件查询" class="headerlink" title="7.4 条件查询"></a>7.4 条件查询</h4><blockquote>
<p>语法：SELECT 列名 FROM 表名 <span style="color:#4fc08d;"><strong>WHERE 条件</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>WHERE 条件</td>
<td>在查询结果中，筛选符合条件的查询结果，条件为布尔表达式</td>
</tr>
</tbody></table>
<h5 id="7-4-1-等值判断（-）"><a href="#7-4-1-等值判断（-）" class="headerlink" title="7.4.1 等值判断（=）"></a>7.4.1 等值判断（=）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 查询薪资是11000的员工信息（编号，名字，薪资）</span><br><span class="line">SELECT employee_id,first_name,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE salary &#x3D; 11000;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：与java等编程语言不同（==），MySQL中等值判断使用=</strong></span></li>
</ul>
<h5 id="7-4-2-逻辑判断（and-or-not）"><a href="#7-4-2-逻辑判断（and-or-not）" class="headerlink" title="7.4.2 逻辑判断（and,or,not）"></a>7.4.2 逻辑判断（and,or,not）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询薪资是11000并且提成是0.30的员工信息(编号、名字、薪资)</span><br><span class="line">SELECT employee_id,first_name,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE salary &#x3D; 11000 AND commission_pct &#x3D; 0.30;</span><br></pre></td></tr></table></figure>

<h5 id="7-4-3-不等值判断（-gt-lt-gt-lt-lt-gt-）"><a href="#7-4-3-不等值判断（-gt-lt-gt-lt-lt-gt-）" class="headerlink" title="7.4.3 不等值判断（&gt;,&lt;,&gt;=,&lt;=,!=,&lt;&gt;）"></a>7.4.3 不等值判断（&gt;,&lt;,&gt;=,&lt;=,!=,&lt;&gt;）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的薪资在6000~10000之间的员工信息(编号，名字，薪资)</span><br><span class="line">SELECT employee_id,first_name,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE salary &gt;&#x3D; 6000 AND salary &lt;&#x3D; 10000;</span><br></pre></td></tr></table></figure>

<h5 id="7-4-4-区间判断（between-and）"><a href="#7-4-4-区间判断（between-and）" class="headerlink" title="7.4.4 区间判断（between and）"></a>7.4.4 区间判断（between and）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的薪资在6000~10000之间的员工信息(编号，名字，薪资)</span><br><span class="line">SELECT employee_id,first_name,salary</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE salary BETWEEN 6000 AND 10000; #闭区间，包含区间边界的两个值</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注：在区间判断语法中，小值在前，大值在后，反正则得不到正确结果</strong></span></li>
</ul>
<h5 id="7-4-5-NULL值判断（IS-NULL-IS-NOT-NULL）"><a href="#7-4-5-NULL值判断（IS-NULL-IS-NOT-NULL）" class="headerlink" title="7.4.5 NULL值判断（IS NULL,IS NOT NULL）"></a>7.4.5 NULL值判断（IS NULL,IS NOT NULL）</h5><blockquote>
<p>列名 IS NULL</p>
<p>列名 IS NOT NULL</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询没有提成的员工信息(编号，名字，薪资，提成)</span><br><span class="line">SELECT employee_id,first_name,salary,commission_pct</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE commission_pct IS NULL;</span><br></pre></td></tr></table></figure>

<h5 id="7-4-6-枚举查询（IN（值1-值2-值3））"><a href="#7-4-6-枚举查询（IN（值1-值2-值3））" class="headerlink" title="7.4.6 枚举查询（IN（值1,值2,值3））"></a>7.4.6 枚举查询（IN（值1,值2,值3））</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询部门编号为7日、80、90的员工信息(编号，名字，薪资，部门编号)</span><br><span class="line">SELECT employee_id,first_name,salary,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE department_id IN(70,80,90);</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注: in的查询效率较低，可通过多条件拼接。</strong></span></li>
</ul>
<h5 id="7-4-7-模糊查询"><a href="#7-4-7-模糊查询" class="headerlink" title="7.4.7 模糊查询"></a>7.4.7 模糊查询</h5><blockquote>
<ul>
<li>LIKE _         #(单个任意字符)</li>
</ul>
<p>​    列名 LIKE ‘张_’</p>
<ul>
<li>LIKE %      #(任意长度的任意字符)</li>
</ul>
<p>​    列名 LIKE ‘张%’</p>
</blockquote>
<ul>
<li><span style="color:#4fc08d;"><strong>注意：模糊查询只能和LIKE关键字结合使用</strong></span></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#查询名字以&quot;L”开头的员工信息(编号，名字，薪资，部门编号)</span><br><span class="line">SELECT employee_id,first_name,salary,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE first_name LIKE &#39;L%&#39;;</span><br><span class="line"></span><br><span class="line">#查询名字以&quot;L”开头并且长度为4的员工信息(编号，名字，薪资，部门编号)</span><br><span class="line">SELECT employee_id,first_name,salary,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE first_name LIKE &#39;L___&#39; ;</span><br></pre></td></tr></table></figure>

<h5 id="7-4-8-分支结构查询"><a href="#7-4-8-分支结构查询" class="headerlink" title="7.4.8 分支结构查询"></a>7.4.8 分支结构查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE</span><br><span class="line">	WHEN条件1 THEN 结果1</span><br><span class="line">	WHEN条件2 THEN 结果2</span><br><span class="line">	WHEN条件3 THEN 结果3</span><br><span class="line">	ELSE结果</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>通过使用CASE END进行条件判断，每条数据对应生成一个值。</strong></span></li>
<li><span style="color:#4fc08d;"><strong>类似Java中的switch。</strong></span></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#查询员工信息(编号，名字，薪资，薪资级别&lt;对应条件表达式生成&gt;)</span><br><span class="line">SELECT employee_id,first_name,salary,department_id,</span><br><span class="line">	CASE</span><br><span class="line">		WHEN salary&gt;&#x3D;10000 THEN &#39;A&#39;</span><br><span class="line">		WHEN salary&gt;&#x3D;8000 AND salary&lt;10000 THEN &#39;B&#39;</span><br><span class="line">		WHEN salary&gt;&#x3D;6000 AND salary&lt;8000 THEN &#39;C&#39;</span><br><span class="line">		WHEN salary&gt;&#x3D;400 AND salary&lt;6000 THEN &#39;D&#39;</span><br><span class="line">	ELSE &#39;E&#39;</span><br><span class="line">	END as &quot;LEVEL&quot;</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></table></figure>



<h4 id="7-5-时间查询"><a href="#7-5-时间查询" class="headerlink" title="7.5 时间查询"></a>7.5 时间查询</h4><blockquote>
<p>语法： SELECT <span style="color:#4fc08d;"><strong>时间函数([参数列表])</strong></span></p>
</blockquote>
<p><span style="color:#4fc08d;"><strong>注意：执行时间函数查询，会自动生成一张续表（一行一列）</strong></span></p>
<table>
<thead>
<tr>
<th align="left">时间函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">SYSDATE()</td>
<td align="left">当前系统时间(日、月、年、时、分、秒)</td>
</tr>
<tr>
<td align="left">CURDATE()</td>
<td align="left">获取当前日期</td>
</tr>
<tr>
<td align="left">CURTIME()</td>
<td align="left">获取当前时间</td>
</tr>
<tr>
<td align="left">WEEK(DATE)</td>
<td align="left">获取指定日期为一年中的第几周</td>
</tr>
<tr>
<td align="left">YEAR(DATE)</td>
<td align="left">获取指定日期的年份</td>
</tr>
<tr>
<td align="left">HOUR(TIME)</td>
<td align="left">获取指定时间的小时值</td>
</tr>
<tr>
<td align="left">MINUTE(TIME)</td>
<td align="left">获取时间的分钟值</td>
</tr>
<tr>
<td align="left">DATEDIFF(DATE1,DATE2)</td>
<td align="left">获取DATE1和DATE2之间相隔的天数</td>
</tr>
<tr>
<td align="left">ADDDATE(DATE,N)</td>
<td align="left">计算DATE加上N天后的日期</td>
</tr>
</tbody></table>
<h5 id="7-5-1-获得当前系统时间"><a href="#7-5-1-获得当前系统时间" class="headerlink" title="7.5.1 获得当前系统时间"></a>7.5.1 获得当前系统时间</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#查询当前时间</span><br><span class="line">SELECT SYSDATE();</span><br><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">#获取当前日期</span><br><span class="line">SELECT CURDATE();</span><br><span class="line"></span><br><span class="line">#获取当前时间</span><br><span class="line">SELECT CURTIME();</span><br></pre></td></tr></table></figure>



<h4 id="7-6-字符串查询"><a href="#7-6-字符串查询" class="headerlink" title="7.6 字符串查询"></a>7.6 字符串查询</h4><blockquote>
<p>语法：SELECT <span style="color:#4fc08d;"><strong>字符串函数([参数列表])</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th>字符串函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>CONCAT(str1,str2,str3…)</td>
<td>将多个字符串连接</td>
</tr>
<tr>
<td>INSTER(str,pos,len,newStr)</td>
<td>将str中指定pos位置开始len长度的内容替换为newStr</td>
</tr>
<tr>
<td>LOWER(str)</td>
<td>将指定字符串转换为小写</td>
</tr>
<tr>
<td>UPPER(str)</td>
<td>将指定字符串转换为大写</td>
</tr>
<tr>
<td>SUBSTRING(str,num,len)</td>
<td>将str字符串指定num位置开始截取len个内容</td>
</tr>
</tbody></table>
<h5 id="7-6-1字符串应用"><a href="#7-6-1字符串应用" class="headerlink" title="7.6.1字符串应用"></a>7.6.1字符串应用</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#拼接内容</span><br><span class="line">CONCAT(&#39;mysql&#39;,&#39;is&#39;,&#39;a&#39;,&#39;database&#39;);</span><br><span class="line"></span><br><span class="line">#字符串替换</span><br><span class="line">INSTER(&#39;这是一个数据库&#39;,3,2,&#39;MySQL&#39;); # 结果： 这是一个MySQL数据库</span><br><span class="line"></span><br><span class="line">#指定内容转换为小写</span><br><span class="line">LOWER(&#39;MYSQL&#39;); # mysql</span><br><span class="line"></span><br><span class="line">#指定内容转换成大些</span><br><span class="line">UPPER(&#39;mysql&#39;); # MYSQL</span><br><span class="line"></span><br><span class="line">#指定内容截取</span><br><span class="line">SUBSTRING(&#39;JavaMySQLOracle&#39;,5,5); #结果MySQL</span><br></pre></td></tr></table></figure>



<h4 id="7-7-聚合函数"><a href="#7-7-聚合函数" class="headerlink" title="7.7 聚合函数"></a>7.7 聚合函数</h4><blockquote>
<p>语法：SELECT <span style="color:#4fc08d;"><strong>聚合函数(列名)</strong></span> FROM 表名;</p>
</blockquote>
<ul>
<li>作用：对多条数据的单列进行统计，返回统计后的一行结果</li>
</ul>
<table>
<thead>
<tr>
<th>聚合函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SUM()</td>
<td>求所有行中单列结果的综合</td>
</tr>
<tr>
<td>AVG()</td>
<td>平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td>最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>最小值</td>
</tr>
<tr>
<td>COUNT()</td>
<td>求总行数</td>
</tr>
</tbody></table>
<h5 id="7-7-1单列总和"><a href="#7-7-1单列总和" class="headerlink" title="7.7.1单列总和"></a>7.7.1单列总和</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#统计所有员工每月的工资总和</span><br><span class="line">SELECT sum(salary)</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></table></figure>

<h5 id="7-7-2-单列平均值"><a href="#7-7-2-单列平均值" class="headerlink" title="7.7.2 单列平均值"></a>7.7.2 单列平均值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#统计所有员工每月的平均工资</span><br><span class="line">SELECT AVG(salary)</span><br><span class="line">FROM t_employees ;</span><br></pre></td></tr></table></figure>

<h5 id="7-7-3-单列最大值"><a href="#7-7-3-单列最大值" class="headerlink" title="7.7.3 单列最大值"></a>7.7.3 单列最大值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#统计所有员工中月薪最高的工资</span><br><span class="line">SELECT MAX(salary)</span><br><span class="line">FROM t_employees ;</span><br></pre></td></tr></table></figure>

<h5 id="7-7-4-单列最小值"><a href="#7-7-4-单列最小值" class="headerlink" title="7.7.4 单列最小值"></a>7.7.4 单列最小值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#统计所有员工中月薪最低的工资</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM t_employees;</span><br></pre></td></tr></table></figure>

<h5 id="7-7-5总行数"><a href="#7-7-5总行数" class="headerlink" title="7.7.5总行数"></a>7.7.5总行数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#统计员工总数</span><br><span class="line">SELECT COUNT(*)</span><br><span class="line">FROM t_employees ;</span><br><span class="line"></span><br><span class="line">#统计有提成的员工人数</span><br><span class="line">SELECT COUNT(commission_pct)</span><br><span class="line">FROM t_employees ;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：聚合函数自动忽略null值，不进行统计。</strong></span></li>
</ul>
<h4 id="7-8-分组查询"><a href="#7-8-分组查询" class="headerlink" title="7.8 分组查询"></a>7.8 分组查询</h4><blockquote>
<p>语法：SELECT 列名 FROM 表名 WHERE 条件 <span style="color:#4fc08d;"><strong>GROUP BY 分组依据(列);</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>GROUP BY</td>
<td>分组依据，必须在WHERE之后生效</td>
</tr>
</tbody></table>
<h5 id="7-8-1-查询各部门总人数"><a href="#7-8-1-查询各部门总人数" class="headerlink" title="7.8.1 查询各部门总人数"></a>7.8.1 查询各部门总人数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#思路:</span><br><span class="line">#1.按照部门编号进行分组(分组依据是department_id)</span><br><span class="line">#2.再针对各部门的人数进行统计(count)</span><br><span class="line">SELECT department_id,COUNT(employee_id)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure>

<h5 id="7-8-2-查询各部门的平均工资"><a href="#7-8-2-查询各部门的平均工资" class="headerlink" title="7.8.2 查询各部门的平均工资"></a>7.8.2 查询各部门的平均工资</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#思路:</span><br><span class="line">#1.按照部门编号进行分组(分组依据department_id)。</span><br><span class="line">#2.针对每个部门进行平均工资统计(avg)。</span><br><span class="line">SELECT department_id,AVG(salary)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id</span><br></pre></td></tr></table></figure>

<h5 id="7-8-3-查询各部门、各岗位的人数"><a href="#7-8-3-查询各部门、各岗位的人数" class="headerlink" title="7.8.3 查询各部门、各岗位的人数"></a>7.8.3 查询各部门、各岗位的人数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#思路:</span><br><span class="line">#1.按照部门编号进行分组(分组依据department_id)。</span><br><span class="line">#2。按照岗位名称进行分组(分组依据job_id)。</span><br><span class="line">#3.针对每个部门中的各个岗位进行人数统计(count)。</span><br><span class="line">SELECT department_id,job_id,COUNT(employee_id)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id,job_id;</span><br></pre></td></tr></table></figure>

<h5 id="7-8-4-常见问题"><a href="#7-8-4-常见问题" class="headerlink" title="7.8.4 常见问题"></a>7.8.4 常见问题</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询各个部门id、总人数、first. name</span><br><span class="line">SELECT department_id,COUNT(*),first_name</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id; #error</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注：分组查询中，select显示的列只能是分组依据列，或者聚合函数列，不能出现其他列。</strong></span></li>
</ul>
<h4 id="7-9-分组过滤查询"><a href="#7-9-分组过滤查询" class="headerlink" title="7.9 分组过滤查询"></a>7.9 分组过滤查询</h4><blockquote>
<p>语法：SELECT 列名 FROM 表名 WHERE 条件 GROUP BY 分组列 <span style="color:#4fc08d;"><strong>HAVING 过滤规则</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>HAVING 过滤规则</td>
<td>过滤规则定义对分组后的数据进行过滤</td>
</tr>
</tbody></table>
<h5 id="7-9-1-统计部门的最高工资"><a href="#7-9-1-统计部门的最高工资" class="headerlink" title="7.9.1 统计部门的最高工资"></a>7.9.1 统计部门的最高工资</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#统计60、70、90号部门的最高工资</span><br><span class="line">#思路:</span><br><span class="line">#1).确定分组依据 (department._id)</span><br><span class="line">#2).对分组后的数据，过滤出部门编号是60、70、90信息</span><br><span class="line">#3).max()函数处理</span><br><span class="line"></span><br><span class="line">SELECT department_id,MAX( alary)</span><br><span class="line">FROM t_employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING department_id in (60,70, 90)</span><br><span class="line"></span><br><span class="line">#group确定分组依据department_id</span><br><span class="line">#having过滤出60 70 90部门</span><br><span class="line">#select查看部门]编号和max函数。</span><br></pre></td></tr></table></figure>



<h4 id="7-10-限定查询"><a href="#7-10-限定查询" class="headerlink" title="7.10 限定查询"></a>7.10 限定查询</h4><blockquote>
<p>SELECT 列名 FROM 表名 <span style="color:#4fc08d;"><strong>LIMIT 起始行,查询行数</strong></span></p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>LIMIT 起始行,查询行数</td>
<td>限定查询结果的起始行和总行数</td>
</tr>
</tbody></table>
<h5 id="7-10-1-查询前5行记录"><a href="#7-10-1-查询前5行记录" class="headerlink" title="7.10.1 查询前5行记录"></a>7.10.1 查询前5行记录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#查询表中前五名员工的所有信息</span><br><span class="line">SELECT *</span><br><span class="line">FROM t_employees LIMIT 0,5;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：起始行是从0开始，代表了第一行。第二个参数代表的是从指定行开始查询几行</strong></span></li>
</ul>
<h5 id="7-10-2-查询范围记录"><a href="#7-10-2-查询范围记录" class="headerlink" title="7.10.2 查询范围记录"></a>7.10.2 查询范围记录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查询表中从第四条开始，查询10行</span><br><span class="line">SELECT * FROM t_employees LIMIT 3,10;</span><br></pre></td></tr></table></figure>

<h5 id="7-10-3-LIMIT的典型应用"><a href="#7-10-3-LIMIT的典型应用" class="headerlink" title="7.10.3 LIMIT的典型应用"></a>7.10.3 LIMIT的典型应用</h5><p>分页查询：一页显示10条，一共查询三页</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#思路:第一页是从0开始，显示10条</span><br><span class="line">SELECT * FROM LIMIT 0,10;</span><br><span class="line"></span><br><span class="line">#第二页是从第10条开始，显示10条</span><br><span class="line">SELECT * FROM LIMIT 10,10;</span><br><span class="line"></span><br><span class="line">#第三页是从20条开始，显示10条</span><br><span class="line">SELECT * FROM LIMIT 20,10;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>经验：在分页应用场景中，起始行是变化的，但是一页显示的条数是不变的</strong></span></li>
</ul>
<h4 id="7-11-查询总结"><a href="#7-11-查询总结" class="headerlink" title="7.11 查询总结"></a>7.11 查询总结</h4><h5 id="7-11-1-SQL编写顺序"><a href="#7-11-1-SQL编写顺序" class="headerlink" title="7.11.1 SQL编写顺序"></a>7.11.1 SQL编写顺序</h5><blockquote>
<p><span style="color:#4fc08d;"><strong>SELECT 列名 FROM 表名 WHERE 条件 GROUP BY 分组 HAVING 过滤条件 ORDER BY 排序列(ASC|DESC) LIMIT 起始行,总条数</strong></span></p>
</blockquote>
<h5 id="7-11-2-SQL语句编写顺序"><a href="#7-11-2-SQL语句编写顺序" class="headerlink" title="7.11.2 SQL语句编写顺序"></a>7.11.2 SQL语句编写顺序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.FROM ：指定数据来源表</span><br><span class="line">2.WHERE ：对查询数据做第一次过滤</span><br><span class="line">3.GROUP BY ：分组</span><br><span class="line">4.HAVING ：对分组后的数据第&#x3D;次过滤</span><br><span class="line">5.SELECT ：查询各字段的值</span><br><span class="line">6.ORDER BY ：排序</span><br><span class="line">7.LIMIT ：限定查询结果</span><br></pre></td></tr></table></figure>



<h4 id="7-12-子查询（作为条件判断）"><a href="#7-12-子查询（作为条件判断）" class="headerlink" title="7.12 子查询（作为条件判断）"></a>7.12 子查询（作为条件判断）</h4><blockquote>
<p>SELECT 列名 FROM 表名 <span style="color:#4fc08d;"><strong>WHERE 条件(子查询结果)</strong></span></p>
</blockquote>
<h5 id="7-12-1-查询工资大于Bruce的员工信息"><a href="#7-12-1-查询工资大于Bruce的员工信息" class="headerlink" title="7.12.1 查询工资大于Bruce的员工信息"></a>7.12.1 查询工资大于Bruce的员工信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#1.先查询到Bruce 的工资(- 行- -列)</span><br><span class="line">SELECT salary FROM t_employees WHERE first_name &#x3D; &#39;Bruce&#39; ;#工资是6000</span><br><span class="line"></span><br><span class="line">#2.查询工资大于Bruce 的员工信息</span><br><span class="line">SELECT * FROM t_employees WHERE salary &gt; 6000;</span><br><span class="line"></span><br><span class="line">#3.将1、2两条语句整合</span><br><span class="line">SELECT * FROM t_employees WHERE salary &gt;</span><br><span class="line">(SELECT SALARY FROM t_ employees WHERE first_name &#x3D; &#39;Bruce&#39;);</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：将子查询”一行一列”的结果作为外部查询的条件，做第二次查询</strong></span></li>
<li><span style="color:#4fc08d;"><strong>子查询得到一行一列的结果才能作为外部查询的等值判断条件或不等值条件判断</strong></span></li>
</ul>
<h4 id="7-13-子查询（作为枚举查询条件）"><a href="#7-13-子查询（作为枚举查询条件）" class="headerlink" title="7.13 子查询（作为枚举查询条件）"></a>7.13 子查询（作为枚举查询条件）</h4><blockquote>
<p>SELECT 列名 FROM 表名 Where 列名 <span style="color:#4fc08d;"><strong>in (子查询结果);</strong></span></p>
</blockquote>
<h5 id="7-13-1-查询与名为’King’同一部门的员工信息"><a href="#7-13-1-查询与名为’King’同一部门的员工信息" class="headerlink" title="7.13.1 查询与名为’King’同一部门的员工信息"></a>7.13.1 查询与名为’King’同一部门的员工信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#思路:</span><br><span class="line">#1.先查询&#39;King&#39;所在的部门]编号(多行单列)</span><br><span class="line">SELECT department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE last_name &#x3D; &#39;King&#39;; &#x2F;&#x2F;部门编号: 80、90</span><br><span class="line"></span><br><span class="line">#2.再查询80、90号部门的员工信息</span><br><span class="line">SELECT employee_id,first_name,salary,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE department_id in (80,90);</span><br><span class="line"></span><br><span class="line">#3.SQL:合并</span><br><span class="line">SELECT employee_id,first_name,salary,department_id</span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE department_id in (SELECT department_id cfrom t_ employees WHERE last_name &#x3D; &#39;King&#39;);#N行一列</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>将子查询“多行一列”的结果作为外部查询的枚举查询条件，做第二次查询</strong></span></li>
</ul>
<h5 id="7-13-2-工资高于60部-所有人的信息"><a href="#7-13-2-工资高于60部-所有人的信息" class="headerlink" title="7.13.2 工资高于60部]所有人的信息"></a>7.13.2 工资高于60部]所有人的信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#1.查询60部门所有人的工资(多行多列)</span><br><span class="line">SELECT salary from t_ employees WHERE department_id&#x3D;60;</span><br><span class="line"></span><br><span class="line">#2.查询高于60部门所有人的工资的员工信息(高于所有)</span><br><span class="line">select * from t_employees where salary &gt; ALL(select salary from t_employees WHERE department_id&#x3D;60); </span><br><span class="line"></span><br><span class="line">#。查询高于60部门的工资的员工信息(高于部分)</span><br><span class="line">select * from t_employees where salary &gt; ANY(select salary from t_employees WHERE department_id&#x3D;60);</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：当子查询结果集形式为多行单列时可以使用ANY或ALL关键字</strong></span></li>
</ul>
<h4 id="7-14-子查询（作为一张表）"><a href="#7-14-子查询（作为一张表）" class="headerlink" title="7.14 子查询（作为一张表）"></a>7.14 子查询（作为一张表）</h4><blockquote>
<p>SELECT  列名  FROM <span style="color:#4fc08d;">** (子查询的结果集)**</span>span&gt;  WHERE  条件;</p>
</blockquote>
<h5 id="7-14-1-查询员工表中工资排名前5名的员工信息"><a href="#7-14-1-查询员工表中工资排名前5名的员工信息" class="headerlink" title="7.14.1 查询员工表中工资排名前5名的员工信息"></a>7.14.1 查询员工表中工资排名前5名的员工信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#思路:</span><br><span class="line">#1.先对所有员工的薪资进行排序(排序后的临时表)</span><br><span class="line">select employee_id,first_name,salary</span><br><span class="line">from t_employees</span><br><span class="line">order by salary desc;</span><br><span class="line"></span><br><span class="line">#2.再查询临时表中前5行员工信息</span><br><span class="line">select employee_id,first_name,salary</span><br><span class="line">from (临时表)</span><br><span class="line">limit 0,5;</span><br><span class="line"></span><br><span class="line">#SQL合并</span><br><span class="line">select employee_id,first_name,salary</span><br><span class="line">from (select employee_id,first_name,salary from t_employees order by salary desc) as temp</span><br><span class="line">limit 0,5;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>将子查询“多行多列”的结果作为外部查询的一张表，做第二次查询。</strong></span></li>
<li><span style="color:#4fc08d;"><strong>注意：子查询作为临时表，为其赋予一个临时表名</strong></span></li>
</ul>
<h4 id="7-15-合并查询（了解）"><a href="#7-15-合并查询（了解）" class="headerlink" title="7.15 合并查询（了解）"></a>7.15 合并查询（了解）</h4><blockquote>
<ul>
<li>SELECT  *  FROM  表名1  <span style="color:#4fc08d;"><strong>UNION</strong></span>  SELECT  *  FROM  表名2</li>
<li>SELECT  *  FROM  表名1  <span style="color:#4fc08d;"><strong>UNION  ALL</strong></span>  SELECT  *  FROM  表名2</li>
</ul>
</blockquote>
<h5 id="7-15-1-合并两张表的结果-去除重复记录"><a href="#7-15-1-合并两张表的结果-去除重复记录" class="headerlink" title="7.15.1 合并两张表的结果(去除重复记录)"></a>7.15.1 合并两张表的结果(去除重复记录)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#合并两张表的结果，去除重复记录</span><br><span class="line">SELECT * FROM t1 UNION SELECT * FROM t2;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：合并结果的两张表，列数必须相同，列的数据类型可以不同</strong></span></li>
</ul>
<h5 id="7-15-2-合并两张表的结果-保留重复记录"><a href="#7-15-2-合并两张表的结果-保留重复记录" class="headerlink" title="7.15.2 合并两张表的结果(保留重复记录)"></a>7.15.2 合并两张表的结果(保留重复记录)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#合并两张表的结果，不去除重复记录(显示所有)</span><br><span class="line">SELECT * FROM t1 UNION ALL SELECT * FROM t2;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>经验：使用UNION合并结果集，会去除掉两张表中重复的数据</strong></span></li>
</ul>
<h4 id="7-16-表连接查询"><a href="#7-16-表连接查询" class="headerlink" title="7.16 表连接查询"></a>7.16 表连接查询</h4><blockquote>
<p>SELECT  列名  FROM  表1  <span style="color:#4fc08d;"><strong>连接方式</strong></span>  表2 <span style="color:#4fc08d;"><strong>ON 连接条件</strong></span></p>
</blockquote>
<h5 id="7-16-1-内连接查询-INNER-JOIN-ON"><a href="#7-16-1-内连接查询-INNER-JOIN-ON" class="headerlink" title="7.16.1 内连接查询(INNER JOIN ON)"></a>7.16.1 内连接查询(INNER JOIN ON)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#1.查询所有有部门的员工信息(不包括没有部门的员工) SQL标准</span><br><span class="line">SELECT * FROM t_employees INNER JOIN t.jobs ON t_employees.JOB_ID &#x3D; t_jobs.JOB_ID</span><br><span class="line">#2.查询所有有部门的员工信息(不包括没有部门的员工) MYSQL</span><br><span class="line">SELECT * FROM t_employees, t_jobs WHERE t_employees.JOB_ID &#x3D; t_jobs.JOB_ID</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>经验：在MySQL中， 第二种方式也可以作为内连接查询，但是不符合SQL标准。而第一种属于SQL标准，与其他关系型数据库通用</strong></span></li>
</ul>
<h5 id="7-16-2-三表连接查询"><a href="#7-16-2-三表连接查询" class="headerlink" title="7.16.2 三表连接查询"></a>7.16.2 三表连接查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查询所有员工工号、名字、部门名称、部门所在国家ID</span><br><span class="line">SELECT * FROM t_employees e</span><br><span class="line">INNER JOIN t_departments d</span><br><span class="line">on e.department_id &#x3D; d.department_id</span><br><span class="line">INNER JOIN t_locations l</span><br><span class="line">ON d.location_id &#x3D; l.location_id</span><br></pre></td></tr></table></figure>

<h5 id="7-16-3-左外连接-LEFT-JOIN-ON"><a href="#7-16-3-左外连接-LEFT-JOIN-ON" class="headerlink" title="7.16.3 左外连接(LEFT JOIN ON)"></a>7.16.3 左外连接(LEFT JOIN ON)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询所有员工信息，以及所对应的部门名称(没有部门的员工，也在查询结果中,部门名称以NULL填充)</span><br><span class="line">SELECT e.employee_id,e.first_name,e.salary,d.department_name FROM t_employees e</span><br><span class="line">LEFT JOIN t_departments d</span><br><span class="line">ON e.department_id &#x3D; d.department_id;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：左外连接，是以左表为主表，依次向右匹配，匹配到，返回结果；匹配不到，则返回NULL值填充</strong></span></li>
</ul>
<h5 id="7-16-4-右外连接-RIGHT-JOIN-ON"><a href="#7-16-4-右外连接-RIGHT-JOIN-ON" class="headerlink" title="7.16.4 右外连接(RIGHT JOIN ON)"></a>7.16.4 右外连接(RIGHT JOIN ON)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询所有部门信息，以及此部门J中的所有员工信息(没有员工的部门，也在查询结果中，员工信息以NULL填充)</span><br><span class="line">SELECT e.employee_id,e.first_name,e.salary,d.department_name FROM t_employees e</span><br><span class="line">RIGHT JOIN t_departments d</span><br><span class="line">ON e.department_id &#x3D; d.department_id;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：右外连接，是以右表为主表，依次向左匹配，匹配到，返回结果；匹配不到，则返回NULL值填充</strong></span></li>
</ul>
<h3 id="八、DML操作【重点】"><a href="#八、DML操作【重点】" class="headerlink" title="八、DML操作【重点】"></a>八、DML操作【<code>重点</code>】</h3><h4 id="8-1-新增（INSTER）"><a href="#8-1-新增（INSTER）" class="headerlink" title="8.1 新增（INSTER）"></a>8.1 新增（INSTER）</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>INSERT INTO</strong></span> 表名<span style="color:#4fc08d;"><strong>(列1,列2,列… )  VALUES (值1,值2,值3…)</strong></span></p>
</blockquote>
<h5 id="8-1-1-添加一条信息"><a href="#8-1-1-添加一条信息" class="headerlink" title="8.1.1 添加一条信息"></a>8.1.1 添加一条信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#添加一条工作岗位信息</span><br><span class="line">INSERT INTO t_jobs(JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) VALUES(&#39;JAVA_Le&#39;,&#39;JAVA_Lecturer&#39;,2500,9000);</span><br><span class="line"></span><br><span class="line">#添加一条员工信息</span><br><span class="line">INSERT INTO &#96;t_ employees&#96;(EMPLOYEE.ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE, JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID)</span><br><span class="line">VALUES(&#39;194&#39;,&#39; Samuel&#39;,&#39; McCain&#39;,&#39;SMCCAIN&#39;,&#39;650.501.3876&#39;,&#39;1998-07-01&#39;,&#39;SH_CLERK&#39;,&#39;3200&#39;,NULL,&#39;123&#39;,&#39;50&#39;);</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：表名后的列名和VALUES里的值要一一 对应(个数、顺序、类型)</strong></span></li>
</ul>
<h4 id="8-2-修改（UPDATE）"><a href="#8-2-修改（UPDATE）" class="headerlink" title="8.2 修改（UPDATE）"></a>8.2 修改（UPDATE）</h4><blockquote>
<p>UPDATE  表名 <span style="color:#4fc08d;"><strong>SET  列1=新值1 , 列2=新值2 , … WHERE  条件;</strong></span></p>
</blockquote>
<h5 id="8-2-1-修改一条信息"><a href="#8-2-1-修改一条信息" class="headerlink" title="8.2.1 修改一条信息"></a>8.2.1 修改一条信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#修改编号为100的员工的工资为25000</span><br><span class="line">UPDATE t_employees SET SALARY &#x3D; 25000 WHERE EMPLOYEE_ID &#x3D; &#39;100&#39; ;</span><br><span class="line"></span><br><span class="line">#修改编号为135的员工信息岗位编号为ST_MAN,工资为3500</span><br><span class="line">UPDATE t_employees SET JOB_ID&#x3D;ST_MAN, SALARY &#x3D; 3500 WHERE EMPLOYEE_ID &#x3D; &#39;135&#39; ;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：SET后多个 列名=值，绝大多数情况下都要加WHERE条件，指定修改，否则为整表更新</strong></span></li>
</ul>
<h4 id="8-3-删除（DELETE）"><a href="#8-3-删除（DELETE）" class="headerlink" title="8.3 删除（DELETE）"></a>8.3 删除（DELETE）</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>DELETE</strong></span>  FROM  表名  WHERE  条件;</p>
</blockquote>
<h5 id="8-3-1-删除一条信息"><a href="#8-3-1-删除一条信息" class="headerlink" title="8.3.1 删除一条信息"></a>8.3.1 删除一条信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#删除编号为135的员工</span><br><span class="line">DELETE FROM t_employees WHERE EMPLOYEE_ID&#x3D;&#39;135&#39; ;</span><br><span class="line"></span><br><span class="line">#删除姓Peter,并且名为Hall 的员工</span><br><span class="line">DELETE FROM t_employees WHERE FIRST_NAME &#x3D; &#39;Peter&#39; AND LAST_NAME&#x3D; &#39;Hall&#39;;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：删除时，如若不加WHERE条件，删除的是整张表的数据</strong></span></li>
</ul>
<h4 id="8-4-清空整表数据（TRUNCATE）"><a href="#8-4-清空整表数据（TRUNCATE）" class="headerlink" title="8.4 清空整表数据（TRUNCATE）"></a>8.4 清空整表数据（TRUNCATE）</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>TRUNCATE</strong></span> TABLE 表名;</p>
</blockquote>
<h5 id="8-4-1-清空整张表"><a href="#8-4-1-清空整张表" class="headerlink" title="8.4.1 清空整张表"></a>8.4.1 清空整张表</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#清空t_countries整张表</span><br><span class="line">TRUNCATE TABLE t_countries;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意:与DELETE不加WHERE删除整表数据不同，TRUNCATE是把表销毁，再按照原表的格式创建一张新表</strong></span></li>
</ul>
<h3 id="九、数据表操作"><a href="#九、数据表操作" class="headerlink" title="九、数据表操作"></a>九、数据表操作</h3><h4 id="9-1-数据类型"><a href="#9-1-数据类型" class="headerlink" title="9.1 数据类型"></a>9.1 数据类型</h4><blockquote>
<p>MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。对于我们约束数据的类型有很大的帮助</p>
</blockquote>
<h5 id="9-1-1-数值类型"><a href="#9-1-1-数值类型" class="headerlink" title="9.1.1 数值类型"></a>9.1.1 数值类型</h5><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>范围（有符号）</th>
<th>范围（无符号）</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>INT</td>
<td>4字节</td>
<td>( -2 147 483 648 , 2 147 483 647 )</td>
<td>( 0 , 4 294 967 295 )</td>
<td>大整数值</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>8字节</td>
<td>( -1.797E+308 , -2.225E-308 )</td>
<td>( 0 , 2.225E-308,1.797E+308 )</td>
<td>双精度浮点数值</td>
</tr>
<tr>
<td>DOUBLE(M,D)</td>
<td>8字节，M表示长度，D表示小数位数</td>
<td>受M,D的约束,DOUBLE(5,2) :(-999.99,999.99)</td>
<td>受M,D的约束</td>
<td>双精度浮点数值</td>
</tr>
<tr>
<td>DECIMAL(P,D)</td>
<td>P是表示有效数字数的精度。(1-65) <br />D是表示小数点后的位数。 (0~30 &amp;&amp; D&lt;=P )</td>
<td>依赖P,D的值</td>
<td>依赖P,D的值</td>
<td>小数值</td>
</tr>
</tbody></table>
<h5 id="9-1-2-日期类型"><a href="#9-1-2-日期类型" class="headerlink" title="9.1.2 日期类型"></a>9.1.2 日期类型</h5><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>范围</th>
<th>格式</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>DATE</td>
<td>3</td>
<td>1000-01-01/9999/12-31</td>
<td>YYYY-MM-DD</td>
<td>日期值</td>
</tr>
<tr>
<td>TIME</td>
<td>3</td>
<td>‘-838:59:59’/838:59:59’</td>
<td>HH:MM:SS</td>
<td>事件值或持续时间</td>
</tr>
<tr>
<td>YEAR</td>
<td>1</td>
<td>1901/2155</td>
<td>YYYY</td>
<td>年份值</td>
</tr>
<tr>
<td>DATETIME</td>
<td>8</td>
<td>1000-01-01 00:00:00/9999-12-31 23:59:59</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>混合日期和时间值</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>4</td>
<td>时间戳,1970-01-01 00:00:00/2038结束时间是第2147483647秒。北京时间2038-1-19 11:14:07，格林尼治时间2038年1月19日凌晨03:14:07</td>
<td>YYYYMMDDHHMMSS</td>
<td>混合日期时间值/时间戳</td>
</tr>
</tbody></table>
<h5 id="9-1-3-字符串类型"><a href="#9-1-3-字符串类型" class="headerlink" title="9.1.3 字符串类型"></a>9.1.3 字符串类型</h5><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR</td>
<td>0~255 字节</td>
<td>定长字符串</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>0~65535 字节</td>
<td>变长字符串</td>
</tr>
<tr>
<td>BLOB（binary large object）</td>
<td>0~65535 字节</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td>TEXT</td>
<td>0~65535 字节</td>
<td>长文本数据</td>
</tr>
</tbody></table>
<ul>
<li><span style="color:#4fc08d;"><strong>CHAR和VARCHAR类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。</strong></span></li>
<li><span style="color:#4fc08d;"><strong>BLOB是一个二进制大对象，可以容纳可变数量的数据。有4种BLOB类型: TINYBLOB、 BLOB、 MEDIUMBLOB和LONGBLOB。 它们只是可容纳值的最大长度不同。</strong></span></li>
</ul>
<h4 id="9-2-数据表的创建（CREATE）"><a href="#9-2-数据表的创建（CREATE）" class="headerlink" title="9.2 数据表的创建（CREATE）"></a>9.2 数据表的创建（CREATE）</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>CREATE TABLE表名(</strong></span><br>    <span style="color:#4fc08d;"><strong>列名  数据类型  [约束]，</strong></span><br>    <span style="color:#4fc08d;"><strong>列名  数据类型  [约束]，</strong></span><br>    …<br>    <span style="color:#4fc08d;"><strong>列名  数据类型  [约束]</strong></span>      #最后一列的末尾不加逗号<br><span style="color:#4fc08d;"><strong>) [charset=utf8] ;</strong></span>                    # 可根据需要指定表的字符编码集</p>
</blockquote>
<h5 id="9-2-1-创建表"><a href="#9-2-1-创建表" class="headerlink" title="9.2.1 创建表"></a>9.2.1 创建表</h5><table>
<thead>
<tr>
<th>列名</th>
<th>数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>subjectId</td>
<td>INT</td>
<td>课程编号</td>
</tr>
<tr>
<td>subjectName</td>
<td>VARCHAR(20)</td>
<td>课程名称</td>
</tr>
<tr>
<td>subjectHours</td>
<td>INT</td>
<td>课程时长</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#按照上述表格创建Subject表，并向表中插入3条测试语句 </span><br><span class="line">CREATE TABLE &#96;subject&#96;(</span><br><span class="line">	subjectId INT ,</span><br><span class="line">	subjectName VARCHAR(20),</span><br><span class="line">	subjectHours INT</span><br><span class="line">)CHARSET&#x3D;utf8;  #指定该表存储数据的字符集</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;subject&#96;(subjectId,subjectName,subjectHours) VALUES(1,&#39;Java&#39;,40);</span><br><span class="line">INSERT INTO &#96;subject&#96;(subjectId,subjectName,subjectHours) VALUES(2,&#39;Golang&#39;,30);</span><br><span class="line">INSERT INTO &#96;subject&#96;(subjectId,subjectName,subjectHours) VALUES(3,&#39;MySQL&#39;,20);</span><br></pre></td></tr></table></figure>



<h4 id="9-3-数据表的修改（ALTER）"><a href="#9-3-数据表的修改（ALTER）" class="headerlink" title="9.3 数据表的修改（ALTER）"></a>9.3 数据表的修改（ALTER）</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>ALTER</strong></span>  TABLE 表名  操作;</p>
</blockquote>
<h5 id="9-3-1-向现有表中添加列"><a href="#9-3-1-向现有表中添加列" class="headerlink" title="9.3.1 向现有表中添加列"></a>9.3.1 向现有表中添加列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#在课程表基础上添加gradeId列</span><br><span class="line">ALTER TABLE subject ADD gradeId int;</span><br></pre></td></tr></table></figure>

<h5 id="9-3-2-修改表中的列"><a href="#9-3-2-修改表中的列" class="headerlink" title="9.3.2 修改表中的列"></a>9.3.2 修改表中的列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#修改课程表中课程名称长度为10个字符</span><br><span class="line">ALTER TABLE subject MODIFY subjectName VARCHAR(10);</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：修改表中的某列时，也要写全列的名字，数据类型，约束</strong></span></li>
</ul>
<h5 id="9-3-3-删除表中的列"><a href="#9-3-3-删除表中的列" class="headerlink" title="9.3.3 删除表中的列"></a>9.3.3 删除表中的列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#删除课程表中gradeId 列</span><br><span class="line">ALTER TABLE subject DROP gradeId;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：删除列时，每次只能删除一列</strong></span></li>
</ul>
<h5 id="9-3-4-修改列名"><a href="#9-3-4-修改列名" class="headerlink" title="9.3.4 修改列名"></a>9.3.4 修改列名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#修改课程表中subjectHours 列为classHours</span><br><span class="line">ALTER TABLE subject CHANGE subjectHours classHours int;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：修改列名时，在给定列新名称时，要指定列的类型和约束</strong></span></li>
</ul>
<h5 id="9-3-5-修改表名"><a href="#9-3-5-修改表名" class="headerlink" title="9.3.5 修改表名"></a>9.3.5 修改表名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#修改课程表的subject为sub</span><br><span class="line">ALTER TABLE subject rename sub;</span><br></pre></td></tr></table></figure>



<h4 id="9-4-数据表的删除-DROP"><a href="#9-4-数据表的删除-DROP" class="headerlink" title="9.4 数据表的删除(DROP)"></a>9.4 数据表的删除(DROP)</h4><blockquote>
<p> <span style="color:#4fc08d;"><strong>DROP</strong></span>  TABLE  表名</p>
</blockquote>
<h5 id="9-4-1-删除学生表"><a href="#9-4-1-删除学生表" class="headerlink" title="9.4.1 删除学生表"></a>9.4.1 删除学生表</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#删除学生表</span><br><span class="line">DROP TABLE subject;</span><br></pre></td></tr></table></figure>



<h3 id="十、约束"><a href="#十、约束" class="headerlink" title="十、约束"></a>十、约束</h3><blockquote>
<ul>
<li><span style="color:#4fc08d;"><strong>问题：在往已创建表中新增数据时，可不可以新增两行相同列值得数据？</strong></span></li>
<li><span style="color:#4fc08d;"><strong>如果可行，会有什么弊端？</strong></span></li>
</ul>
</blockquote>
<h4 id="10-1-实体完整性约束"><a href="#10-1-实体完整性约束" class="headerlink" title="10.1 实体完整性约束"></a>10.1 实体完整性约束</h4><p>表中的一行数据代表一个实体 (entity) ，实体完整性的作用即是标识每一行数据不重复、 实体唯一。</p>
<h5 id="10-1-1-主键约束"><a href="#10-1-1-主键约束" class="headerlink" title="10.1.1 主键约束"></a>10.1.1 主键约束</h5><blockquote>
<p> <span style="color:#4fc08d;"><strong>PRIMARY KEY</strong></span> 唯一，标识表中的一行数据，此列的值不可重复，且不能为NULL</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#为表中适用主键的列添加主键约束</span><br><span class="line">CREATE TABLE subject(</span><br><span class="line">	subjectId INT PRIMARY KEY, #课程编号标识每一个课程的编号唯一，且不能为NULL</span><br><span class="line">	subjectName VARCHAR(20),</span><br><span class="line">	subjectHours INT</span><br><span class="line">)charset&#x3D;utf8;</span><br><span class="line">INSERT INTO subject(subjectId,subjectName,subjectHours) VALUES(1,&#39;Java&#39;,40);</span><br><span class="line">INSERT INTO subject(subjectId,subjectName,subjectHours) VALUES(1,&#39;Java&#39;,40);# error主键1已存在</span><br></pre></td></tr></table></figure>

<h5 id="10-1-2-唯一约束"><a href="#10-1-2-唯一约束" class="headerlink" title="10.1.2 唯一约束"></a>10.1.2 唯一约束</h5><blockquote>
<p> <span style="color:#4fc08d;"><strong>UNIQUE</strong></span>唯一， 标识表中的一行数据，不可重复，可以为NULL</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#为表中列值不允许重复的列添加唯一约束</span><br><span class="line">CREATE TABLE subject(</span><br><span class="line">	subjectId INT PRIMARY KEY,</span><br><span class="line">	subjectName VARCHAR(20) UNIQUE, #课程名称唯一!</span><br><span class="line">	subjectHours INT</span><br><span class="line">)charset&#x3D;utf8;</span><br><span class="line">INSERT INTO subject(subjectId,subjectName,subjectHours) VALUES(1, &#39;Java&#39;,40);</span><br><span class="line">INSERT INTO subject(subjectId,subjectName,subjectHours) VALUES(2, &#39;Java&#39;,40);# error课程名称已存在</span><br></pre></td></tr></table></figure>

<h5 id="10-1-3-自动增长列"><a href="#10-1-3-自动增长列" class="headerlink" title="10.1.3 自动增长列"></a>10.1.3 自动增长列</h5><blockquote>
<p><span style="color:#4fc08d;"><strong>AUTO_INCREMENT</strong></span> 自动增长，给主键数值列添加自动增长。从1开始，每次加1。不能单独使用，需要和主键配合。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#为表中主键列添加自动增长，避免忘记主键ID序号</span><br><span class="line">CREATE TABLE subject(</span><br><span class="line">	subjectId INT PRIMARY KEY AUTO_INCREMENT, #课程编号主键且自动增长，会从1开始根据添加数据的顺序依次加1</span><br><span class="line">	subjectName VARCHAR(20) UNIQUE,</span><br><span class="line">	subjectHours INT</span><br><span class="line">)charset&#x3D;utf8;</span><br><span class="line">INSERT INTO subject(subjectName,subjectHours) VALUES(&#39;Java&#39;,40);#课程编号自动从1增长</span><br><span class="line">INSERT INTO subject(subjectName,subjectHours) VALUES(&#39;JavaScript&#39;,30);#第二条编号为2</span><br></pre></td></tr></table></figure>



<h4 id="10-2-域完整性约束"><a href="#10-2-域完整性约束" class="headerlink" title="10.2 域完整性约束"></a>10.2 域完整性约束</h4><blockquote>
<p>限制列的单元格的数据正确性。</p>
</blockquote>
<h5 id="10-2-1-非空约束"><a href="#10-2-1-非空约束" class="headerlink" title="10.2.1 非空约束"></a>10.2.1 非空约束</h5><blockquote>
<p><span style="color:#4fc08d;"><strong>NOT NULL</strong></span>  非空，此列必须有值。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#课程名称虽然添加了唯一约束， 但是有NULL值存在的可能,要避免课程名称为NULL</span><br><span class="line">CREATE TABLE subject(</span><br><span class="line">	subjectId INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	subjectName VARCHAR(20) UNIQUE NOT NULL,</span><br><span class="line">	subjectHours INT</span><br><span class="line">)charset&#x3D;utf8;</span><br><span class="line">INSERT INTO subject(subjectName,subjectHours) VALUES(NULL,40);#error,课程名称约束了非空</span><br></pre></td></tr></table></figure>

<h5 id="10-2-2默认值约束"><a href="#10-2-2默认值约束" class="headerlink" title="10.2. 2默认值约束"></a>10.2. 2默认值约束</h5><blockquote>
<p><span style="color:#4fc08d;"><strong>DEFAULT 值</strong></span>  为列赋予默认值,当新增数据不指定值时，书写DEFAULT， 以指定的默认值进行填充。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#当存储课程信息时，若课程时长没有指定值，则以默认课时20填充</span><br><span class="line">CREATE TABLE subject(</span><br><span class="line">	subjectId INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	subjectName VARCHAR(20) UNIQUE NOT NULL,</span><br><span class="line">	subjectHours INT DEFAULT 20</span><br><span class="line">)charset&#x3D;utf8;</span><br><span class="line">INSERT INTO subject(subjectName,subjectHours) VALUES(&#39;Java&#39;,DEFAULT);#课程时长以默认值20填充</span><br></pre></td></tr></table></figure>

<h5 id="10-2-3引用完整性约束"><a href="#10-2-3引用完整性约束" class="headerlink" title="10.2.3引用完整性约束"></a>10.2.3引用完整性约束</h5><blockquote>
<ul>
<li>语法：<span style="color:#4fc08d;"><strong>CONSTRAINT  引用名  FOREIGN KEY  (列名)  REFERENCES  被引用表名(列名)</strong></span></li>
<li>详解：FOREIGN KEY 引用外部表的某个列的值，新增数据时，约束此列的值必须是引用表中存在的值。</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#创建专业表</span><br><span class="line">CREATE TABLE Speciality(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	SpecialName VARCHAR(20) UNIQUE NOT NULL</span><br><span class="line">)CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">#创建课程表(课程表的SpecialId引用专业表的id)</span><br><span class="line">CREATE TABLE subject(</span><br><span class="line">	subjectId INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	subjectName VARCHAR(20) UNIQUE NOT NULL,</span><br><span class="line">	subjectHours INT DEFAULT 20,</span><br><span class="line">	specialId INT NOT NULL,</span><br><span class="line">	CONSTRAINT fk_subject_specialId FOREIGN KEY(specialId) REFERENCES Speciality(id) #引用专业表里的 id 作为外键，新增课程信息时，约束课程所属的专业。</span><br><span class="line">)charset&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">#专业表新增数据</span><br><span class="line">INSERT INTO Speciality(SpecialName) VALUES(&#39;Java&#39;);</span><br><span class="line">INSERT INTO Speciality(SpecialName) VALUES(&#39;C#&#39;);</span><br><span class="line">#课程信息表添加数据</span><br><span class="line">INSERT INTO subject(subjectName,subjectHours) VALUES(&#39;Java&#39;,30,1);#专业id为1，引用的是专业表的Java</span><br><span class="line">INSERT INTO subject(subjectName,subjectHours) VALUES(&#39;C#MVC&#39;,10,2);#专业id为2,引用的是专业表的C#</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：当两张表存在引用关系，要执行删除操作，一定要先删除从表（引用表），再删除主表（被引用表）</strong></span></li>
</ul>
<h4 id="10-3-约束创建整合"><a href="#10-3-约束创建整合" class="headerlink" title="10.3 约束创建整合"></a>10.3 约束创建整合</h4><blockquote>
<p> 创建带有约束的表。</p>
</blockquote>
<h5 id="10-3-1-创建表"><a href="#10-3-1-创建表" class="headerlink" title="10.3.1 创建表"></a>10.3.1 创建表</h5><table>
<thead>
<tr>
<th>列名</th>
<th>数据类型</th>
<th>约束</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>GradeId</td>
<td>INT</td>
<td>主键、自动增长</td>
<td>编辑编号</td>
</tr>
<tr>
<td>GradeName</td>
<td>VARCHAR</td>
<td>唯一、非空</td>
<td>班级名称</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Grade(</span><br><span class="line">	GradeId INT PRIMARY KEY AUTO_ INCREMENT,</span><br><span class="line">	GradeName VARCHAR(20) unique NOT NULL</span><br><span class="line">)CHARSET&#x3D;UTF8;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>列名</th>
<th>数据类型</th>
<th>约束</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>student_id</td>
<td>varchar(50)</td>
<td>主键</td>
<td>学号</td>
</tr>
<tr>
<td>student_name</td>
<td>varchar(50)</td>
<td>非空</td>
<td>姓名</td>
</tr>
<tr>
<td>sex</td>
<td>CHAR(2)</td>
<td>默认填充’男’</td>
<td>性别</td>
</tr>
<tr>
<td>borndate</td>
<td>date</td>
<td>非空</td>
<td>生日</td>
</tr>
<tr>
<td>phone</td>
<td>varchar(11)</td>
<td>无</td>
<td>电话</td>
</tr>
<tr>
<td>gradeId</td>
<td>int</td>
<td>非空，外键约束：引用班级表的gradeId</td>
<td>班级编号</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student(</span><br><span class="line">	student_id varchar(50) PRIMARY KEY,</span><br><span class="line">	student_name varchar(50) NOT NULL,</span><br><span class="line">	sex CHAR(2) DEFAULT &#39;男&#39;,</span><br><span class="line">	borndate date NOT NULL,</span><br><span class="line">	phone varchar(11),</span><br><span class="line">	gradeId int not null,</span><br><span class="line">	CONSTRAINT fk_student_gradeId FOREIGN KEY(gradeId) REFERENCES Grade(GradeId) #引用Gr ade表的GradeId列的值作为外键，插入时约束学生的班级编号必须存在。</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：创建关系表时，一定要先创建主表，再创建从表；删除关系表时，先删除从表，再删除主表。</strong></span></li>
</ul>
<h3 id="十一、事务【重点】"><a href="#十一、事务【重点】" class="headerlink" title="十一、事务【重点】"></a>十一、事务【<code>重点</code>】</h3><h4 id="11-1-模拟转账"><a href="#11-1-模拟转账" class="headerlink" title="11.1 模拟转账"></a>11.1 模拟转账</h4><blockquote>
<p>生活当中转账是转账方账户扣钱，收账方账户加钱。我们用数据库操作来模拟现实转账。</p>
</blockquote>
<h5 id="11-1-1-数据库模拟转账"><a href="#11-1-1-数据库模拟转账" class="headerlink" title="11.1.1 数据库模拟转账"></a>11.1.1 数据库模拟转账</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#A账户转账给B账户1000 元。</span><br><span class="line">#A账户减1000元</span><br><span class="line">UPDATE account SET MONEY &#x3D; MONEY-1000 WHERE id&#x3D;1 ;</span><br><span class="line"></span><br><span class="line">#B账户加1000元</span><br><span class="line">UPDATE account SET MONEY &#x3D; MONEY+1000 WHERE id&#x3D;2;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>上述代码完成了两个账户之间转账的操作。</strong></span></li>
</ul>
<h5 id="11-1-2-模拟转账错误"><a href="#11-1-2-模拟转账错误" class="headerlink" title="11.1.2 模拟转账错误"></a>11.1.2 模拟转账错误</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#A账户转账给B账户1000元。</span><br><span class="line">#A账户减1000元</span><br><span class="line">UPDATE account SET MONEY &#x3D; MONEY-1000 WHERE id&#x3D;1 ;</span><br><span class="line"></span><br><span class="line">#断电、异常、出错...</span><br><span class="line">#B账户加1000元</span><br><span class="line">UPDATE account SET MONEY &#x3D; MONEY+1000 WHERE id&#x3D;2 ;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>上述代码在减操作后过程中出现了异常或加钱语句出错，会发现，减钱仍旧是成功的，而加钱失败了!</strong></span></li>
<li><span style="color:#4fc08d;"><strong>注意：每条SQL语句都是一个独立的操作，一个操作执行完对数据库是永久性的影响。</strong></span></li>
</ul>
<h4 id="11-2-事务的概念"><a href="#11-2-事务的概念" class="headerlink" title="11.2 事务的概念"></a>11.2 事务的概念</h4><blockquote>
<p>事务是一个原子操作，是一个最小执行单元。可以由一个或多个SQL语句组成，在同一个事务当中，所有的SQL语句都成功执行时，整<br>个事务成功，有一个SQL语句执行失败，整个事务都执行失败。</p>
</blockquote>
<h4 id="11-3-事务的边界"><a href="#11-3-事务的边界" class="headerlink" title="11.3 事务的边界"></a>11.3 事务的边界</h4><blockquote>
<ul>
<li>开始：连接到数据库，执行一条DML语句。 上一个事务结束后，又输入了一条DML语句，即事务的开始</li>
<li>结束：<ul>
<li>提交：<ul>
<li>显示提交：<span style="color:#4fc08d;"><strong>commit</strong></span>; </li>
<li>隐式提交：一条创建、删除的语句，正常退出(客户端退出连接) ;</li>
</ul>
</li>
<li>回滚：<ul>
<li>显示回滚：<span style="color:#4fc08d;"><strong>rollback</strong></span>;</li>
<li>隐式回滚：非正常退出(断电、宕机)，执行了创建、删除的语句，但是失败了，会为这个无效的语句执行回滚。</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="11-4-事务的原理"><a href="#11-4-事务的原理" class="headerlink" title="11.4 事务的原理"></a>11.4 事务的原理</h4><blockquote>
<p>数据库会为每一个客户端都维护一个空间独立的缓存区(回滚段)，一个事务中所有的增删改语句的执行结果都会缓存在回滚段中，只有当事务中所有SQL语句均正常结束(commit) ，才会将回滚段中的数据同步到数据库。否则无论因为哪种原因失败，整个事务将回滚(rollback)。</p>
</blockquote>
<h4 id="11-5-事务的特性"><a href="#11-5-事务的特性" class="headerlink" title="11.5 事务的特性"></a>11.5 事务的特性</h4><blockquote>
<ul>
<li><span style="color:#4fc08d;"><strong>Atomicity（原子性）</strong></span><br>表示一个事务内的所有操作是一个整体， 要么全部成功，要么全部失败</li>
<li><span style="color:#4fc08d;"><strong>Consistency（一致性）</strong></span><br>表示一个事务内有一个操作失败时，所有的更改过的数据都必须回滚到修改前状态</li>
<li><span style="color:#4fc08d;"><strong>Isolation（隔离性）</strong></span><br>事务查看数据操作时数据所处的状态，要么是另一 并发事务修改它之前的状态，要么是另一事务修改它之后的状态，事务不会查看中间状态的数据。</li>
<li><span style="color:#4fc08d;"><strong>Durability（持久性）</strong></span><br>持久性事务完成之后，它对于系统的影响是永久性的。</li>
</ul>
</blockquote>
<h4 id="11-6-事务应用"><a href="#11-6-事务应用" class="headerlink" title="11.6 事务应用"></a>11.6 事务应用</h4><blockquote>
<p> 应用环境：基于增删改语句的操作结果（均返回操作后受影响的行数），可通过程序逻辑手动控制事务提交或回滚。</p>
</blockquote>
<h5 id="11-6-1事务完成转账"><a href="#11-6-1事务完成转账" class="headerlink" title="11.6.1事务完成转账"></a>11.6.1事务完成转账</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#A账户给B账户转账。</span><br><span class="line">#1.开启事务</span><br><span class="line">START TRANSACTION;|setAutoCommit&#x3D;0 ;#禁止自动提交     setAutoCommit&#x3D;1;#开启自动提交</span><br><span class="line">#2.事务内数据操作语句</span><br><span class="line">UPDATE ACCOUNT SET MONEY &#x3D; MONEY-1000 WHERE ID &#x3D; 1;</span><br><span class="line">UPDATE ACCOUNT SET MONEY &#x3D; MONEY+1000 WHERE ID &#x3D; 2;</span><br><span class="line">#3.事务内语句都成功了，执行COMMIT;</span><br><span class="line">COMMIT;</span><br><span class="line">#4.事务内如果出现错误，执行ROLLBACK;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：开启事务后，执行的语句均属于当前事务，成功再执行COMIIT, 失败要进行ROLLBACK</strong></span></li>
</ul>
<h3 id="十二、权限管理"><a href="#十二、权限管理" class="headerlink" title="十二、权限管理"></a>十二、权限管理</h3><h4 id="12-1-创建用户"><a href="#12-1-创建用户" class="headerlink" title="12.1 创建用户"></a>12.1 创建用户</h4><blockquote>
<p>CREATE <span style="color:#4fc08d;"><strong>USER</strong></span> 用户名 <span style="color:#4fc08d;"><strong>IDENTIFIED BY</strong></span> 密码</p>
</blockquote>
<h5 id="12-1-1-创建一个用户"><a href="#12-1-1-创建一个用户" class="headerlink" title="12.1.1 创建一个用户"></a>12.1.1 创建一个用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#创建一个用户名为张三的用户</span><br><span class="line">CREATE USER &#96;zhangsan&#96; IDENTIFIED BY &#39;123456&#39;;</span><br></pre></td></tr></table></figure>



<h4 id="12-2-授权"><a href="#12-2-授权" class="headerlink" title="12.2 授权"></a>12.2 授权</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>GRANT ALL ON</strong></span> 数据库.表 <span style="color:#4fc08d;"><strong>TO</strong></span> 用户名</p>
</blockquote>
<h5 id="12-2-1-用户授权"><a href="#12-2-1-用户授权" class="headerlink" title="12.2.1 用户授权"></a>12.2.1 用户授权</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#将companyDB下的所有表的权限都赋给 zhangsan用户</span><br><span class="line">GRANT ALL ON companyDB.* TO &#96;zhangsan&#96;;</span><br></pre></td></tr></table></figure>



<h4 id="12-3-撤销权限"><a href="#12-3-撤销权限" class="headerlink" title="12.3 撤销权限"></a>12.3 撤销权限</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>REVOKE ALL ON</strong></span> 数据库.表名 <span style="color:#4fc08d;"><strong>FROM</strong></span> 用户名</p>
</blockquote>
<ul>
<li><span style="color:#4fc08d;"><strong>注意：撤销权限后，账户需要重新连接客户端才会生效</strong></span></li>
</ul>
<h5 id="12-3-1-撤销用户权限"><a href="#12-3-1-撤销用户权限" class="headerlink" title="12.3.1 撤销用户权限"></a>12.3.1 撤销用户权限</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#撤销 zhangsan 的companydb的所有表的权限</span><br><span class="line">REVOKE ALL ON companydb.* FROM &#96;zhangsan&#96;;</span><br></pre></td></tr></table></figure>



<h4 id="12-4-删除用户"><a href="#12-4-删除用户" class="headerlink" title="12.4 删除用户"></a>12.4 删除用户</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>DROP USER</strong></span> 用户名</p>
</blockquote>
<h5 id="12-4-1-删除用户"><a href="#12-4-1-删除用户" class="headerlink" title="12.4.1 删除用户"></a>12.4.1 删除用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#删除用户</span><br><span class="line">DROP USER &#96;zhangsan&#96;;</span><br></pre></td></tr></table></figure>



<h3 id="十三、视图"><a href="#十三、视图" class="headerlink" title="十三、视图"></a>十三、视图</h3><h4 id="13-1-概念"><a href="#13-1-概念" class="headerlink" title="13.1 概念"></a>13.1 概念</h4><blockquote>
<p>视图，虚拟表，从一个表或多个表中查询出来的表，作用和真实表一样，包含-系列带有行和列的数据。视图中，用户可以使用SELECT语句查询数据，也可以使用INSERT, UPDATE, DELETE修改记录，视图可以使用户操作方便，并保障数据库系统安全。</p>
</blockquote>
<h4 id="13-2-视图特点"><a href="#13-2-视图特点" class="headerlink" title="13.2 视图特点"></a>13.2 视图特点</h4><blockquote>
<ul>
<li>优点<ul>
<li>简单化，数据所见即所得。</li>
<li>安全性，用户只能查询或修改他们所能见到得到的数据。</li>
<li>逻辑独立性，可以屏蔽真实表结构变化带来的影响。</li>
</ul>
</li>
<li>缺点<ul>
<li>性能相对较差，简单的查询也会变得稍显复杂。</li>
<li>修改不方便，特变是复杂的聚合视图基本无法修改。</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="13-3-视图的创建"><a href="#13-3-视图的创建" class="headerlink" title="13.3 视图的创建"></a>13.3 视图的创建</h4><blockquote>
<p>语法： <span style="color:#4fc08d;"><strong>CREATE VIEW 视图名 AS</strong></span> 查询数据源表语句;</p>
</blockquote>
<h5 id="13-3-1-创建视图"><a href="#13-3-1-创建视图" class="headerlink" title="13.3.1 创建视图"></a>13.3.1 创建视图</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 创建 t_empinfo 的视图，其视图从t_employees表中查询到员工编号、员工姓名、员工邮箱、工资</span><br><span class="line">CREATE VIEW t_empinfo</span><br><span class="line">AS</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,LAST_NAME,email FROM t_employees;</span><br></pre></td></tr></table></figure>



<h5 id="13-3-2-使用视图"><a href="#13-3-2-使用视图" class="headerlink" title="13.3.2 使用视图"></a>13.3.2 使用视图</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询 t_empinfo 视图中编号为101的员工信息</span><br><span class="line">SELECT * FROM t_empinfo WHERE employee_id&#x3D;&#39;101&#39;;</span><br></pre></td></tr></table></figure>



<h4 id="13-4-视图的修改"><a href="#13-4-视图的修改" class="headerlink" title="13.4 视图的修改"></a>13.4 视图的修改</h4><blockquote>
<ul>
<li>方式一：<span style="color:#4fc08d;">*<em>CREATE OR REPLACE VIEW *</em></span>视图名 AS 查询语句</li>
<li>方式二：<span style="color:#4fc08d;">*<em>ALTER VIEW *</em></span>视图名 AS 查询语句</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 方式1：如果视图存在则进行修改、反之进行创建</span><br><span class="line">CREATE OR REPLACE  VIEW t_empinfo</span><br><span class="line">AS</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,JOB_ID FROM t_employees;</span><br><span class="line"></span><br><span class="line"># 方式2：直接对已存在的视图进行修改</span><br><span class="line">ALTER VIEW t_empinfo</span><br><span class="line">AS</span><br><span class="line">SELECT EMPLOYEE_ID,FIRST_NAME,LAST_NAME,email FROM t_employees;</span><br></pre></td></tr></table></figure>



<h4 id="13-5-视图的删除"><a href="#13-5-视图的删除" class="headerlink" title="13.5 视图的删除"></a>13.5 视图的删除</h4><blockquote>
<p><span style="color:#4fc08d;"><strong>DROP VIEW</strong></span> 视图名</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#删除t_empinfo视图</span><br><span class="line">DROP VIEW t_empinfo;</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="color:#4fc08d;"><strong>注意：删除视图不会影响原表</strong></span></li>
</ul>
<h4 id="13-6-视图的注意事项"><a href="#13-6-视图的注意事项" class="headerlink" title="13.6 视图的注意事项"></a>13.6 视图的注意事项</h4><blockquote>
<ul>
<li>视图不会独立存储数据，原表发生改变，视图也发生改变。没有优化任何查询性能。</li>
<li>如果视图包含以下结构中的一种，则视图不可更新<ul>
<li>聚合函数的结果</li>
<li>DISTINCT 去重后的结果</li>
<li>GROUP BY分组后的结果</li>
<li>HAVING筛选过滤后的结果</li>
<li>UNION、 UNION ALL联合后的结果</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="十四、SQL语言分类"><a href="#十四、SQL语言分类" class="headerlink" title="十四、SQL语言分类"></a>十四、SQL语言分类</h3><h4 id="14-1-SQL语言分类"><a href="#14-1-SQL语言分类" class="headerlink" title="14.1 SQL语言分类"></a>14.1 SQL语言分类</h4><blockquote>
<ul>
<li>数据查询语言DQL (Data Query Language) : select、 where、 order by、group by、having </li>
<li>数据定义语言DDL (Data Definition Language) : create、 alter、 drop</li>
<li>数据操作语言DML (Data Manipulation Language) : insert、 update、 delete</li>
<li>事务处理语言TPL (Transaction Process Language) : commit、 rollback </li>
<li>数据控制语言DCL (Data Control Language) : grant、 revoke</li>
</ul>
</blockquote>
<h3 id="十五、综合练习"><a href="#十五、综合练习" class="headerlink" title="十五、综合练习"></a>十五、综合练习</h3><h4 id="15-1数据库表"><a href="#15-1数据库表" class="headerlink" title="15.1数据库表"></a>15.1数据库表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"># 创建用户表</span><br><span class="line">CREATE TABLE user(</span><br><span class="line">	userId INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	username VARCHAR(20) NOT NULL,</span><br><span class="line">	password VARCHAR(18) NOT NULL,</span><br><span class="line">	address VARCHAR(100),</span><br><span class="line">	phone VARCHAR(11)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 创建分类表</span><br><span class="line">CREATE TABLE category(</span><br><span class="line">  	cid VARCHAR(32) PRIMARY KEY ,</span><br><span class="line">  	cname VARCHAR(100) NOT NULL		#分类名称</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 商品表</span><br><span class="line">CREATE TABLE &#96;products&#96; (</span><br><span class="line">  	&#96;pid&#96; VARCHAR(32) PRIMARY KEY,</span><br><span class="line">  	&#96;name&#96; VARCHAR(40) ,</span><br><span class="line">  	&#96;price&#96; DOUBLE(7,2),</span><br><span class="line">   	category_id VARCHAR(32),</span><br><span class="line">   	CONSTRAINT fk_products_category_id FOREIGN KEY(category_id) REFERENCES category(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 订单表</span><br><span class="line">CREATE TABLE &#96;orders&#96;(</span><br><span class="line">  	&#96;oid&#96; VARCHAR(32) PRIMARY KEY ,</span><br><span class="line">  	&#96;totalprice&#96; DOUBLE(12,2), #总计</span><br><span class="line">  	&#96;userId&#96; INT,</span><br><span class="line">   	CONSTRAINT fk_orders_userId FOREIGN KEY(userId) REFERENCES USER(userId) #外键</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 订单项表</span><br><span class="line">CREATE TABLE orderitem(</span><br><span class="line">  	oid VARCHAR(32),	#订单id</span><br><span class="line">  	pid VARCHAR(32),	#商品id</span><br><span class="line">  	num INT ,         #购买商品数量</span><br><span class="line">  	PRIMARY KEY(oid,pid), #主键</span><br><span class="line">  	CONSTRAINT fk_orderitem_oid FOREIGN KEY(oid) REFERENCES orders(oid),</span><br><span class="line">  	CONSTRAINT fk_orderitem_pid FOREIGN KEY(pid) REFERENCES products(pid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#-------------------------------------------------</span><br><span class="line">#初始化数据</span><br><span class="line"></span><br><span class="line">#用户表添加数据</span><br><span class="line">INSERT INTO USER(username,PASSWORD,address,phone) VALUES(&#39;张三&#39;,&#39;123&#39;,&#39;北京昌平沙河&#39;,&#39;13812345678&#39;);</span><br><span class="line">INSERT INTO USER(username,PASSWORD,address,phone) VALUES(&#39;王五&#39;,&#39;5678&#39;,&#39;北京海淀&#39;,&#39;13812345141&#39;);</span><br><span class="line">INSERT INTO USER(username,PASSWORD,address,phone) VALUES(&#39;赵六&#39;,&#39;123&#39;,&#39;北京朝阳&#39;,&#39;13812340987&#39;);</span><br><span class="line">INSERT INTO USER(username,PASSWORD,address,phone) VALUES(&#39;田七&#39;,&#39;123&#39;,&#39;北京大兴&#39;,&#39;13812345687&#39;);</span><br><span class="line"></span><br><span class="line">#商品表初始化数据</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p001&#39;,&#39;联想&#39;,5000,&#39;c001&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p002&#39;,&#39;海尔&#39;,3000,&#39;c001&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p003&#39;,&#39;雷神&#39;,5000,&#39;c001&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p004&#39;,&#39;JACK JONES&#39;,800,&#39;c002&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p005&#39;,&#39;真维斯&#39;,200,&#39;c002&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p006&#39;,&#39;花花公子&#39;,440,&#39;c002&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p007&#39;,&#39;劲霸&#39;,2000,&#39;c002&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p008&#39;,&#39;香奈儿&#39;,800,&#39;c003&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p009&#39;,&#39;相宜本草&#39;,200,&#39;c003&#39;);</span><br><span class="line">INSERT INTO products(pid,NAME,price,category_id) VALUES(&#39;p010&#39;,&#39;梅明子&#39;,200,NULL);</span><br><span class="line"></span><br><span class="line">#分类表初始化数据</span><br><span class="line">INSERT INTO category VALUES(&#39;c001&#39;,&#39;电器&#39;);</span><br><span class="line">INSERT INTO category VALUES(&#39;c002&#39;,&#39;服饰&#39;);</span><br><span class="line">INSERT INTO category VALUES(&#39;c003&#39;,&#39;化妆品&#39;);</span><br><span class="line">INSERT INTO category VALUES(&#39;c004&#39;,&#39;书籍&#39;);</span><br><span class="line"></span><br><span class="line">#添加订单</span><br><span class="line">INSERT INTO orders VALUES(&#39;o6100&#39;,18000.50,1);</span><br><span class="line">INSERT INTO orders VALUES(&#39;o6101&#39;,7200.35,1);</span><br><span class="line">INSERT INTO orders VALUES(&#39;o6102&#39;,600.00,2);</span><br><span class="line">INSERT INTO orders VALUES(&#39;o6103&#39;,1300.26,4);</span><br><span class="line"></span><br><span class="line">#订单详情表</span><br><span class="line">INSERT INTO orderitem VALUES(&#39;o6100&#39;,&#39;p001&#39;,1),(&#39;o6100&#39;,&#39;p002&#39;,1),(&#39;o6101&#39;,&#39;p003&#39;,1);</span><br></pre></td></tr></table></figure>



<h4 id="15-2-综合练习1-多表查询"><a href="#15-2-综合练习1-多表查询" class="headerlink" title="15.2 综合练习1-多表查询"></a>15.2 综合练习1-多表查询</h4><h5 id="15-2-1-查询所有用户的订单"><a href="#15-2-1-查询所有用户的订单" class="headerlink" title="15.2.1 查询所有用户的订单"></a>15.2.1 查询所有用户的订单</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT o.oid,o.totalprice,u.userId,u.username,u.phone </span><br><span class="line">FROM orders o INNER JOIN user u ON o.userId &#x3D; u.userId;</span><br></pre></td></tr></table></figure>

<h5 id="15-2-2-查询用户id为1的所有订单详情"><a href="#15-2-2-查询用户id为1的所有订单详情" class="headerlink" title="15.2.2 查询用户id为1的所有订单详情"></a>15.2.2 查询用户id为1的所有订单详情</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT o.oid,o.totalprice,u.userId,u.username,u.phone ,oi.pid</span><br><span class="line">FROM orders o INNER JOIN user u ON o.userId &#x3D; u.userId</span><br><span class="line">INNER JOIN orderitem oi ON o.oid &#x3D; oi.oid</span><br><span class="line">WHERE u.userId &#x3D; 1;</span><br></pre></td></tr></table></figure>



<h4 id="15-3-综合练习2-子查询"><a href="#15-3-综合练习2-子查询" class="headerlink" title="15.3 综合练习2-子查询"></a>15.3 综合练习2-子查询</h4><h5 id="15-3-1-查看用户为张三的订单"><a href="#15-3-1-查看用户为张三的订单" class="headerlink" title="15.3.1 查看用户为张三的订单"></a>15.3.1 查看用户为张三的订单</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM orders WHERE userid&#x3D;(SELECT userid FROM USER WHERE username&#x3D;&#39;张三&#39;);</span><br></pre></td></tr></table></figure>

<h5 id="15-3-2-查询出订单的价格大于800的所有用户信息"><a href="#15-3-2-查询出订单的价格大于800的所有用户信息" class="headerlink" title="15.3.2 查询出订单的价格大于800的所有用户信息"></a>15.3.2 查询出订单的价格大于800的所有用户信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM USER WHERE userid IN (SELECT DISTINCT userid FROM orders WHERE totalprice &gt; 800);</span><br></pre></td></tr></table></figure>



<h4 id="15-4-综合练习3-分页查询"><a href="#15-4-综合练习3-分页查询" class="headerlink" title="15.4 综合练习3-分页查询"></a>15.4 综合练习3-分页查询</h4><h5 id="15-4-1-查询所有的订单信息，每页显示5条数据"><a href="#15-4-1-查询所有的订单信息，每页显示5条数据" class="headerlink" title="15.4.1 查询所有的订单信息，每页显示5条数据"></a>15.4.1 查询所有的订单信息，每页显示5条数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM orders LIMIT 0,5;</span><br></pre></td></tr></table></figure>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Oxywen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://oxywen.cn/post/mysql/one-day/">https://oxywen.cn/post/mysql/one-day/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://oxywen.cn">不闻星河须臾</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="social-share pull-right" data-disabled="facebook,google,twitter,diandian,linkedin"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/post/java/idea/surround-with-hot-key-failure/"><i class="fa fa-chevron-left">  </i><span>IDEA Surround With热键失效的解决办法</span></a></div><div class="next-post pull-right"><a href="/post/go/hello/"><span>一点Golang的学习笔记</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/Valine1.3.10.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'EPD2p82uCKxOE9lfI7hiSp8e-gzGzoHsz',
  appKey:'Ycr0GVDd8SzCOTyaHEhGRf0s',
  placeholder:'评论时请留下您的昵称和邮箱，否则评论有关的消息可能无法及时通知给您',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-cn'
});

$(document).ready(function(){ 
  if($("#vcomment").html()){
    var c_name = $('#vcomment input[name="nick"]');
    var c_mail = $('#vcomment input[type="email"]');
    var c_text = $('#veditor');
    var mailzz = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
    var c_placeholder = c_text.attr('placeholder');
    $(".vcontrol .text-right button").hide();
    $(".vcontrol .text-right").prepend('<span class="submit_f vbtn">回复</span>');
    $('body').on('click','.submit_f',function(){
      if(nullpd(c_name.val()) || !mailzz.test(c_mail.val())){
        Tip("提交失败，昵称和邮箱不能为空或格式错误");
        return false;
      }
      if(!c_text.val()){
        Tip("提交失败，留言评论不能为空");
        return false;
      }
      $('.vsubmit').click();
    });
    function nullpd(str){
      if(str == "" || str == null || str == undefined){
        return true;
      }else{
        return false;
      }
    }
    function Tip(content){
      const str = `<div class="valert text-center"><div class="vtext">`+content+`</div></div>`;
      const vmark = document.querySelector('.vmark');
      vmark.innerHTML = str;
      vmark.style.display = 'block';
      setTimeout(function() {
        vmark.style.display = 'none';
        vmark.innerHTML = '';
      }, 1500);
    }
  }
}); </script></div></div><footer class="footer-bg" style="background-image: url(https://s1.ax1x.com/2020/08/18/duKzss.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 By Oxywen</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>